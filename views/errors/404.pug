//- doctype html
//- html(lang="es")
//-     head
//-         meta(charset="UTF-8")
//-         meta(name="viewport", content="width=device-width, initial-scale=1.0")
//-         title 404 - Página no encontrada
//-         //- Puedes usar Tailwind o Bootstrap vía CDN para que se vea bien rápido
//-         link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css")
//-         style.
//-             body { background-color: #f8f9fa; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
//-             .error-container { text-align: center; background: white; padding: 50px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
//-             h1 { font-size: 100px; color: #007bff; margin-bottom: 0; }
//-             h2 { color: #343a40; margin-bottom: 20px; }
//-             p { color: #6c757d; margin-bottom: 30px; }
//-             .btn-home { background-color: #007bff; color: white; padding: 10px 30px; border-radius: 25px; text-decoration: none; transition: 0.3s; }
//-             .btn-home:hover { background-color: #0056b3; box-shadow: 0 5px 15px rgba(0,123,255,0.4); }

//-     body
//-         .error-container
//-             h1 404
//-             h2 ¡Ups! Página no encontrada
//-             p Lo sentimos, la sección que buscas no existe o ha sido movida.
//-             //- Esta ruta '/' activará tu lógica de redirección por rol en app.js
//-             a.btn-home(href="/") Volver al Inicio

//- extends ../layout

//- block contenido
//-   .container.text-center(style="margin-top: 100px;")
//-     .row.justify-content-center
//-       .col-md-6
//-         .card.shadow-lg.border-0(style="border-radius: 20px;")
//-           .card-body.p-5
//-             h1.display-1.fw-bold.text-danger 404
//-             i.bi.bi-shield-lock-fill.text-danger(style="font-size: 4rem;")
//-             h2.fw-bold.mt-3 Acceso Restringido
//-             p.text-muted Lo sentimos, #{usuario.nombre}. No tienes los permisos necesarios para acceder a esta sección. Esta área es exclusiva para Administradores.
//-             hr
//-             a.btn.btn-primary.px-4.py-2(href="/secretaria" style="border-radius: 10px;") 
//-               i.bi.bi-house-fill.me-2
//-               | Volver al Inicio

//- extends ../layout

//- block contenido
//-   .container.text-center(style="margin-top: 100px;")
//-     .row.justify-content-center
//-       .col-md-6
//-         .card.shadow-lg.border-0(style="border-radius: 20px;")
//-           .card-body.p-5
//-             //- Si es un 404 real usamos un color, si es falta de permiso otro
//-             h1.display-1.fw-bold.text-primary 404
//-             i.bi.bi-exclamation-triangle-fill.text-warning(style="font-size: 4rem;")
            
//-             h2.fw-bold.mt-3 Página no encontrada
            
//-             if usuario
//-               p.text-muted Hola #{usuario.nombre}, parece que la sección que buscas no existe o no tienes permisos para verla.
//-             else
//-               p.text-muted La sección que buscas no existe o debes iniciar sesión.
            
//-             hr
//-             //- CAMBIO CLAVE: Enviamos a "/" para que app.js decida según el Rol
//-             a.btn.btn-primary.px-4.py-2(href="/" style="border-radius: 10px;") 
//-               i.bi.bi-house-fill.me-2
//-               | Volver al Inicio


extends ../layout

block contenido
  .container.text-center(style="margin-top: 100px;")
    .row.justify-content-center
      .col-md-6
        .card.shadow-lg.border-0(style="border-radius: 20px;")
          .card-body.p-5
            //- Encabezado visual
            h1.display-1.fw-bold.text-primary 404
            i.bi.bi-exclamation-triangle-fill.text-warning(style="font-size: 4rem;")
            
            h2.fw-bold.mt-3 Página no encontrada
            
            if usuario
              p.text-muted Hola #{usuario.nombre}, la sección que buscas no existe o ha sido movida temporalmente.
            else
              p.text-muted La sección que buscas no existe o debes iniciar sesión para continuar.
            
            hr
            
            //- Lógica de redirección basada en roles
            //- Si no hay usuario (null/undefined), mandamos al login
            - var urlDestino = "/"
            if usuario
              if usuario.id_rol === 4
                - urlDestino = "/pacientes/dashboard"
              else if usuario.id_rol === 1 || usuario.id_rol === 3
                - urlDestino = "/secretaria"

            a.btn.btn-primary.px-4.py-2(href=urlDestino style="border-radius: 10px;") 
              i.bi.bi-house-fill.me-2
              | Volver al Inicio