extends ../layout

block contenido
    style.
        .page-container {
            background-color: #eef5ff;
            font-family: Arial, sans-serif;
            padding: 20px;
            border-radius: 10px;
        }
        .center-text {
            text-align: center;
            margin-bottom: 20px;
            font-size: 28px;
            font-weight: bold;
        }
        .top-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .actions i {
            font-size: 20px;
            cursor: pointer;
            margin-right: 12px;
        }
        .icon-edit {
            color: #1e88e5;
        }
        tr:hover {
            filter: brightness(0.96);
        }

    .page-container

        h3.center-text Médicos

        .top-actions
            a.btn.btn-success(href="/medicos/create")
                i.fa-solid.fa-user-doctor
                |  Nuevo Médico

        if mensaje
            script.
                Swal.fire({
                    title: 'Mensaje',
                    text: '#{mensaje}',
                    icon: 'success',
                    confirmButtonText: 'OK'
                });

        table#tablaMedicos.table.table-striped.table-bordered.table-hover
            thead.table-dark
                tr
                    th DNI
                    th Nombre
                    th Apellido
                    th Nacimiento
                    th Especialidades
                    th Matrículas
                    th Teléfonos
                    th Estado
                    th Acciones

            tbody
                each medico in medicos
                    - const especialidades = medico.especialidades ? medico.especialidades.split(', ') : []
                    - const matriculas = medico.matriculas ? medico.matriculas.split(', ') : []
                    - const telefonos = medico.telefonos ? medico.telefonos.split(', ') : []

                    tr
                        td= medico.dni
                        td= medico.nombre
                        td= medico.apellido
                        td= medico.nacimiento || "Sin datos"

                        td
                            if especialidades.length === 0
                                span.text-muted Sin datos
                            else if especialidades.length === 1
                                span= especialidades[0]
                            else
                                select.form-select.form-select-sm
                                    each esp in especialidades
                                        option= esp

                        td
                            if matriculas.length === 0
                                span.text-muted Sin datos
                            else if matriculas.length === 1
                                span= matriculas[0]
                            else
                                select.form-select.form-select-sm
                                    each mat in matriculas
                                        option= mat

                        td
                            if telefonos.length === 0
                                span.text-muted Sin datos
                            else if telefonos.length === 1
                                span= telefonos[0]
                            else
                                select.form-select.form-select-sm
                                    each tel in telefonos
                                        option= tel

                        td
                            if medico.estado === 1
                                span.badge.bg-success Activo
                            else
                                span.badge.bg-secondary Inactivo

                        td.actions
                            a(href=`/medicos/edit/${medico.id}` title="Gestionar médico")
                                i.icon-edit.fa-solid.fa-pen-to-square
