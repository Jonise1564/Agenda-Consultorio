//- extends ../layout

//- block contenido
//-     h1 Medicos
//-     a(href="/medicos/create" class="btn btn-success") Crear Médico
//-     //- a(href="/especialidades" class="btn btn-primary") Gestionar Especialidades

//-     if mensaje
//-         .alert.alert-success
//-             h1= mensaje

//-     //- script(
//-     //-     src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
//-     //-     integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
//-     //-     crossorigin="anonymous"
//-     //- )

//-     table#example
//-         thead
//-             tr
//-                 th N° Documento
//-                 th Nombre
//-                 th Apellido
//-                 th Fecha Nacimiento
//-                 th Especialidades
//-                 th Matricula
//-                 th Telefonos
//-                 th Estado
//-                 th Acciones

//-         tbody
//-             each medico in medicos
//-                 - const especialidades = medico.especialidades ? medico.especialidades.split(', ') : []
//-                 - const matriculas = medico.matriculas ? medico.matriculas.split(', ') : []
//-                 - const telefonos = medico.telefonos ? medico.telefonos.split(', ') : []

//-                 tr
//-                     td= medico.dni
//-                     td= medico.nombre
//-                     td= medico.apellido
//-                     td= medico.nacimiento || "Sin datos"

//-                     // -----------------------------
//-                     // ESPECIALIDADES
//-                     // -----------------------------
//-                     td
//-                         if especialidades.length === 0
//-                             span Sin datos
//-                         else if especialidades.length === 1
//-                             span= especialidades[0]
//-                         else
//-                             select
//-                                 each esp in especialidades
//-                                     option= esp

//-                     // -----------------------------
//-                     // MATRICULAS
//-                     // -----------------------------
//-                     td
//-                         if matriculas.length === 0
//-                             span Sin datos
//-                         else if matriculas.length === 1
//-                             span= matriculas[0]
//-                         else
//-                             select
//-                                 each mat in matriculas
//-                                     option= mat

//-                     // -----------------------------
//-                     // TELEFONOS
//-                     // -----------------------------
//-                     td
//-                         if telefonos.length === 0
//-                             span Sin datos
//-                         else if telefonos.length === 1
//-                             span= telefonos[0]
//-                         else
//-                             select
//-                                 each tel in telefonos
//-                                     option= tel

//-                     // -----------------------------
//-                     // ESTADO
//-                     // -----------------------------
//-                     td= medico.estado === 1 ? "Activo" : "Inactivo"

//-                     // -----------------------------
//-                     // ACCIONES
//-                     // -----------------------------
//-                     td
//-                         a(href=`/medicos/edit/${medico.id}` class="btn btn-info btn-sm") Gestionar
extends ../layout

block contenido
    style.
        body {
            background-color: #eef5ff;
            font-family: Arial, sans-serif;
        }
        .center-text {
            text-align: center;
            margin-bottom: 20px;
            font-size: 28px;
            font-weight: bold;
        }
        .page-container {
            padding: 20px;
        }
        .top-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .actions i {
            font-size: 20px;
            cursor: pointer;
            margin-right: 12px;
        }
        .icon-edit {
            color: #1e88e5;
        }
        .icon-matricula {
            color: #2e7d32;
        }

        tr:hover {
            filter: brightness(0.96);
        }

    .page-container

        // ---------- TÍTULO ----------
        h3.center-text Médicos

        // ---------- ACCIONES SUPERIORES ----------
        .top-actions
            a.btn.btn-success(href="/medicos/create")
                i.fa-solid.fa-user-doctor
                |  Nuevo Médico

        // ---------- MENSAJE ----------
        if mensaje
            script.
                Swal.fire({
                    title: 'Mensaje',
                    text: '#{mensaje}',
                    icon: 'success',
                    confirmButtonText: 'OK'
                });

        // ---------- TABLA ----------
        table#tablaMedicos.table.table-striped.table-bordered.table-hover
            thead.table-dark
                tr
                    th DNI
                    th Nombre
                    th Apellido
                    th Nacimiento
                    th Especialidades
                    th Matrículas
                    th Teléfonos
                    th Estado
                    th Acciones

            tbody
                each medico in medicos
                    - const especialidades = medico.especialidades ? medico.especialidades.split(', ') : []
                    - const matriculas = medico.matriculas ? medico.matriculas.split(', ') : []
                    - const telefonos = medico.telefonos ? medico.telefonos.split(', ') : []

                    tr
                        td= medico.dni
                        td= medico.nombre
                        td= medico.apellido
                        td= medico.nacimiento || "Sin datos"

                        // ---------- ESPECIALIDADES ----------
                        td
                            if especialidades.length === 0
                                span.text-muted Sin datos
                            else if especialidades.length === 1
                                span= especialidades[0]
                            else
                                select.form-select.form-select-sm
                                    each esp in especialidades
                                        option= esp

                        // ---------- MATRÍCULAS ----------
                        td
                            if matriculas.length === 0
                                span.text-muted Sin datos
                            else if matriculas.length === 1
                                span= matriculas[0]
                            else
                                select.form-select.form-select-sm
                                    each mat in matriculas
                                        option= mat

                        // ---------- TELÉFONOS ----------
                        td
                            if telefonos.length === 0
                                span.text-muted Sin datos
                            else if telefonos.length === 1
                                span= telefonos[0]
                            else
                                select.form-select.form-select-sm
                                    each tel in telefonos
                                        option= tel

                        // ---------- ESTADO ----------
                        td
                            if medico.estado === 1
                                span.badge.bg-success Activo
                            else
                                span.badge.bg-secondary Inactivo

                        // ---------- ACCIONES ----------
                        td.actions
                            a(href=`/medicos/edit/${medico.id}` title="Gestionar médico")
                                i.icon-edit.fa-solid.fa-pen-to-square
