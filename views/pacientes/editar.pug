extends ../layout

block contenido
    .container.mt-4
        h2.text-center Editar Paciente

        form(action=`/pacientes/update/${paciente.id}` method="POST")

            // ID PACIENTE
            .row.mb-3
                .col-md-4
                    label.form-label(for="id_paciente") ID Paciente
                    input#id_paciente.form-control(type="number" name="id_paciente" value=paciente.id readonly)
            
            // DATOS PERSONALES
            .row.mb-3
                .col-md-4
                    label.form-label(for="dni") DNI
                    input#dni.form-control(type="number" name="dni" value=persona.dni readonly)

                .col-md-4
                    label.form-label(for="nombre") Nombre
                    input#nombre.form-control(type="text" name="nombre" value=persona.nombre required)

                .col-md-4
                    label.form-label(for="apellido") Apellido
                    input#apellido.form-control(type="text" name="apellido" value=persona.apellido required)

            .row.mb-3
                .col-md-4
                    label.form-label(for="nacimiento") Fecha de Nacimiento
                    input#nacimiento.form-control(type="date" name="nacimiento" value=persona.nacimiento required)

            // USUARIO
            .row.mb-4
                .col-md-6
                    label.form-label(for="email") Email
                    input#email.form-control(type="email" name="email" value=usuario.email required)

                .col-md-6
                    label.form-label(for="password") Contraseña
                    input#password.form-control(type="password" name="password" value=usuario.password required)

            // OBRA SOCIAL
            .row.mb-4
                .col-md-6
                    label.form-label Obra Social Actual
                    input.form-control(type="text" value=obra_social readonly)

                .col-md-6
                    label.form-label(for="id_obra_social") Cambiar Obra Social
                    select#id_obra_social.form-select(name="id_obra_social")
                        option(value="") Seleccione una obra social...
                        each os in obrasSociales
                            option(value=os.id selected=(os.id === paciente.id_obra_social)) #{os.nombre}

            // TELÉFONOS
            .row.mb-4
                .col-md-12
                    label.form-label Teléfonos
                    each numero in telefonos.numeros
                        input.form-control.mb-2(type="text" name="telefonos[]" value=numero)

            .d-flex.justify-content-between.mt-4
                a.btn.btn-secondary(href="/pacientes") Volver
                button.btn.btn-primary(type="submit") Guardar Cambios

        // ESTADO DEL PACIENTE
        .mt-4
            if paciente.estado === 1
                form(action=`/pacientes/inactivar/${paciente.id}` method="POST")
                    button.btn.btn-danger(type="submit") Inactivar Paciente
            else
                form(action=`/pacientes/activar/${paciente.id}` method="POST")
                    button.btn.btn-success(type="submit") Activar Paciente
