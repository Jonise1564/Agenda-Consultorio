//- extends ../layout

//- block contenido
//-     style.
//-         body {
//-             background-color: #f0f8ff;
//-         }
//-         .center-text {
//-             text-align: center;
//-             font-weight: bold;
//-         }   
//-         .center {
//-             align-items: center;
//-             justify-content: center;
//-             margin: 15px;
//-         }
//-         .right-align { 
//-             display: flex; 
//-             justify-content: flex-end; 
//-         }
//-        /* .small-width {
//-             width: 25%;
//-         }*/
//-         .card {
//-             border: 1px solid #ddd;
//-             border-radius: 4px;
//-             border-left: solid goldenrod 2px;
//-             padding: 16px;
//-             margin: 16px;
//-             box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
//-             background-color: #f9f9f9;
//-             font-family: 'Arial, sans-serif';
//-         }
//-         .card-header {
//-             font-weight: bold;
//-             margin-bottom: 8px;
//-             font-size: 1.2em;
//-             color: #333;
//-         }
//-         .card-body {
//-             margin-bottom: 8px;
//-             font-size: 1em;
//-             color: #555;
//-         }
//-         .card-footer {
//-             display: flex;
//-             justify-content: space-between;
//-         }
//-         .btn-yellow {
//-             background-color: #ffeb3b;
//-             color: black;
//-             border: none;
//-             padding: 8px 16px;
//-             border-radius: 4px;
//-             cursor: pointer;
//-         }
//-         .btn-yellow:hover {
//-             background-color: #fdd835;
//-         }
//-         .filters {
//-             display: flex;
//-             justify-content: space-between;
//-             flex-wrap: wrap;
//-             margin-bottom: 16px;
//-         }
//-         .filter-item {
//-             margin-right: 16px;
//-         }
//-         .filters p {
//-             margin: 0;
//-             font-weight: bold;
//-             font-size: 15px;
//-         }
//-         .filters select {
//-             width: 150px;
//-             margin-right: 16px;
//-         }
//-         .crear{
//-             margin-left: 30px;
//-         }
//-         .card-header h2 {
//-             font-weight: bold;
//-         }
//-         .card-body p {
//-             margin: 4px 0;
//-             font-size: 17px;
//-         }
//-         .card-body p:nth-child(1) {
//-             font-weight: bold;
//-             font-size: 20px;
//-         }
//-         .card-body p:nth-child(5) {
//-             color: goldenrod;
//-         }

//-     .container  
//-         .right-align
//-             a(href="/" class="btn btn-primary") Iniciar Sesión
        
//-         h1.center-text Cartilla Médica
       
//-         if mensaje
//-             script.
//-                 Swal.fire({
//-                     title: 'Mensaje',
//-                     text: '#{mensaje}',
//-                     icon: 'success',
//-                     confirmButtonText: 'OK'
//-                 });
//-         .filters
//-               //- visto por todos los roles 
//-               .filter-item
//-                 p Especialidad 
//-                 select(name="especialidades" class="form-select small-width" onchange="filterByEspecialidad(this.value)")
//-                     option(value="") Todas    
//-                         each especialidad in especialidades || []
//-                             option(value=especialidad.nombre)= especialidad.nombre
//-               .filter-item
//-                 p Clasificación
//-                 select(name="clasificaciones" class="form-select small-width" onchange="filterByClasificacion(this.value)")
//-                     option(value="") Todas  
//-                     option(value="Normal") Normal
//-                     option(value="Especial") Especial 
//-                     option(value="Vip") Vip  
//-               .filter-item
//-                 p Médico
//-                 select(name="medicos" class="form-select small-width" onchange="filterByMedico(this.value)")
//-                     option(value="") Todos    
//-                         each medico in medicos || []
//-                             option(value=`${medico.apellido} ${medico.nombre}`)=`${medico.apellido} ${medico.nombre}`
//-               .filter-item
//-                 p Día
//-                 select(name="dias" class="form-select small-width" onchange="filterByDia(this.value)")
//-                     option(value="") Todos    
//-                     option(value="Lunes") Lunes   
//-                     option(value="Martes") Martes
//-                     option(value="Miercoles") Miercoles 
//-                     option(value="Jueves") Jueves
//-                     option(value="Viernes") Viernes
//-                     option(value="Sábado") Sábado
//-                     option(value="Domingo") Domingo
//-               .filter-item
//-                 p Turnos
//-                 select(name="estado_turno" class="form-select small-width" onchange="filterByEstadoTurno(this.value)")
//-                     option(value="") Todos    
//-                     option(value="Libre") Libre
//-                     option(value="Reservado") Reservado
//-                     option(value="Confirmado") Confirmado
//-                     option(value="Cancelado") Cancelado
//-                     option(value="Ausente") Ausente
//-                     option(value="Presente") Presente
//-                     option(value="En Consulta") En Consulta
//-                     option(value="Atendido") Atendido
//-                     option(value="No Disponible") No Disponible
//-               .filter-item
//-                 p Obra Social
//-                 select(name="obra_social" class="form-select small-width" onchange="filterByObraSocial(this.value)")
//-                     option(value="") Todas    
//-                         each obra_social in obras_sociales || []
//-                             option(value=obra_social.nombre)= obra_social.nombre
        
//-     a.crear(href="/agendas/create" class="btn btn-success") Crear Agenda
//-     .cards-container
//-         each agenda in agendas 
//-             .card(data-especialidad=agenda.especialidad data-clasificacion=agenda.clasificacion data-medico=`${agenda.apellido} ${agenda.nombre}` data-dia=agenda.dias data-estado-turno=agenda.estado_turno data-obra-social=agenda.obra_social)
//-                 .card-header
//-                     h2= `${agenda.apellido} ${agenda.nombre}`
//-                 .card-body
//-                     p #{agenda.especialidad}
//-                     p #{agenda.dias}
//-                     p= `${agenda.hora_inicio} a ${agenda.hora_fin} hs`
//-                     p #{agenda.sucursal}
//-                     p #{agenda.obra_social} 
//-                 .card-footer
//-                     a(href=`/turnos/${agenda.id}` class="btn btn-success") Ver Turnos 
//-                     a(href=`/agendas/edit/${agenda.id}` class="btn btn-info") Editar
//-                     button(onclick=`confirmDelete(${agenda.id})` class="btn btn-danger") Eliminar
//-                     a(href=`/turnos/${agenda.id}` class="btn btn-yellow") Reservar Turno

//-     script.
//-         function confirmDelete(id) { 
//-             Swal.fire({ 
//-                 title: '¿Estás seguro?',
//-                 text: "¡No podrás revertir esto!",
//-                 icon: 'warning', 
//-                 showCancelButton: true,
//-                 confirmButtonColor: '#3085d6', 
//-                 cancelButtonColor: '#d33', 
//-                 confirmButtonText: 'Sí, eliminarlo!' 
//-             }).then((result) => { 
//-                 if (result.isConfirmed) {
//-                     // Lógica para eliminar la agenda 
//-                     deleteAgenda(id); 
//-                 }
//-             }); 
//-         }

//-         function deleteAgenda(id) { 
//-             fetch(`/agendas/${id}`, { 
//-                 method: 'DELETE' 
//-             }).then(response => { 
//-                 if (response.ok) { 
//-                     Swal.fire( 
//-                         'Eliminado!', 
//-                         'La agenda ha sido eliminada.', 
//-                         'success' 
//-                     ).then(() => {
//-                         //refresca la pagina despues de eliminar
//-                         location.reload()
//-                     })
//-                     // Actualiza la tabla o realiza cualquier otra acción necesaria 
//-                 } else { 
//-                     Swal.fire( 
//-                         'Error!',
//-                         'Hubo un problema al eliminar la agenda.', 
//-                         'error'
//-                     ); 
//-                 }
//-             })
//-             .catch(error => { 
//-                 Swal.fire( 
//-                     'Error!', 
//-                     'Hubo un problema al eliminar la agenda.', 
//-                     'error' 
//-                 ); 
//-             }); 
//-         }
//-         function filterByEspecialidad(especialidad) {
//-             const cards = document.querySelectorAll('.card');
//-             cards.forEach(card => {
//-                 if (especialidad === "" || card.getAttribute('data-especialidad') === especialidad) {
//-                     card.style.display = 'block';
//-                 } else {
//-                     card.style.display = 'none';
//-                 }
//-             });
//-         }
//-         function filterByClasificacion(clasificacion) {
//-             const cards = document.querySelectorAll('.card');
//-             cards.forEach(card => {
//-                 if (clasificacion === "" || card.getAttribute('data-clasificacion') === clasificacion) {
//-                     card.style.display = 'block';
//-                 } else {
//-                     card.style.display = 'none';
//-                 }
//-             });
//-         }
//-         function filterByMedico(medico) {
//-             const cards = document.querySelectorAll('.card');
//-             cards.forEach(card => {
//-                 if (medico === "" || card.getAttribute('data-medico') === medico) {
//-                     card.style.display = 'block';
//-                 } else {
//-                     card.style.display = 'none';
//-                 }
//-             });
//-         }
//-         function filterByDia(dia) {
//-             const cards = document.querySelectorAll('.card');
//-             cards.forEach(card => {
//-                 if (dia === "" || card.getAttribute('data-dia').includes(dia)) {
//-                     card.style.display = 'block';
//-                 } else {
//-                     card.style.display = 'none';
//-                 }
//-             });
//-         }
//-         function filterByEstadoTurno(estadoTurno) { 
//-             const cards = document.querySelectorAll('.card'); 
//-             cards.forEach(card => {
//-                  if (estadoTurno === "" || card.getAttribute('data-estado-turno') === estadoTurno) { 
//-                     card.style.display = 'block'; 
//-                     } else { 
//-                         card.style.display = 'none'; 
//-                     } 
//-                 }); 
//-             }
//-         function filterByObraSocial(obraSocial) {
//-             const cards = document.querySelectorAll('.card');
//-             cards.forEach(card => {
//-                 if (obraSocial === "" || card.getAttribute('data-obra-social') === obraSocial) {
//-                     card.style.display = 'block';
//-                 } else {
//-                     card.style.display = 'none';
//-                 }
//-             });
//-         }


//- extends ../layout

//- block contenido
//-     style.
//-         body {
//-             background-color: #f0f8ff;
//-         }

//-         .center-text {
//-             text-align: center;
//-             font-weight: bold;
//-         }

//-         .center {
//-             align-items: center;
//-             justify-content: center;
//-             margin: 15px;
//-         }

//-         .right-align {
//-             display: flex;
//-             justify-content: flex-end;
//-         }

//-         .card {
//-             border: 1px solid #ddd;
//-             border-radius: 4px;
//-             border-left: solid goldenrod 2px;
//-             padding: 16px;
//-             margin: 16px;
//-             box-shadow: 0 2px 4px rgba(0,0,0,0.1);
//-             background-color: #f9f9f9;
//-             font-family: Arial, sans-serif;
//-         }

//-         .card-header h2 {
//-             font-weight: bold;
//-             font-size: 24px;
//-             color: #333;
//-         }

//-         .card-body p {
//-             margin: 4px 0;
//-             font-size: 17px;
//-             color: #555;
//-         }

//-         .card-body p:first-child {
//-             font-weight: bold;
//-             font-size: 20px;
//-         }

//-         .card-body p:nth-child(5) {
//-             color: goldenrod;
//-         }

//-         .card-footer {
//-             display: flex;
//-             justify-content: space-between;
//-             flex-wrap: wrap;
//-             gap: 8px;
//-         }

//-         .btn-yellow {
//-             background-color: #ffeb3b;
//-             color: black;
//-             border: none;
//-             padding: 8px 16px;
//-             border-radius: 4px;
//-             cursor: pointer;
//-         }

//-         .btn-yellow:hover {
//-             background-color: #fdd835;
//-         }

//-         .filters {
//-             display: flex;
//-             flex-wrap: wrap;
//-             gap: 20px;
//-             margin: 20px 0;
//-         }

//-         .filter-item p {
//-             font-weight: bold;
//-             margin: 0;
//-             font-size: 15px;
//-         }

//-         .crear {
//-             margin-left: 30px;
//-         }


//-     .container
//-         .right-align
//-             a.btn.btn-primary(href="/") Iniciar Sesión

//-         h1.center-text Cartilla Médica

//-         if mensaje
//-             script.
//-                 Swal.fire({
//-                     title: 'Mensaje',
//-                     text: '#{mensaje}',
//-                     icon: 'success',
//-                     confirmButtonText: 'OK'
//-                 });

//-         .filters
//-             .filter-item
//-                 p Especialidad
//-                 select.form-select(onchange="applyFilters()" id="f-especialidad")
//-                     option(value="") Todas
//-                     each especialidad in especialidades || []
//-                         option(value=especialidad.nombre)= especialidad.nombre

//-             .filter-item
//-                 p Clasificación
//-                 select.form-select(onchange="applyFilters()" id="f-clasificacion")
//-                     option(value="") Todas
//-                     option Normal
//-                     option Especial
//-                     option Vip

//-             .filter-item
//-                 p Médico
//-                 select.form-select(onchange="applyFilters()" id="f-medico")
//-                     option(value="") Todos
//-                     each medico in medicos || []
//-                         option(value=`${medico.apellido} ${medico.nombre}`)= `${medico.apellido} ${medico.nombre}`

//-             .filter-item
//-                 p Día
//-                 select.form-select(onchange="applyFilters()" id="f-dia")
//-                     option(value="") Todos
//-                     each dia in ["Lunes","Martes","Miercoles","Jueves","Viernes","Sábado","Domingo"]
//-                         option(value=dia)= dia

//-             .filter-item
//-                 p Turnos
//-                 select.form-select(onchange="applyFilters()" id="f-turno")
//-                     option(value="") Todos
//-                     each estado in ["Libre","Reservado","Confirmado","Cancelado","Ausente","Presente","En Consulta","Atendido","No Disponible"]
//-                         option(value=estado)= estado

//-             .filter-item
//-                 p Obra Social
//-                 select.form-select(onchange="applyFilters()" id="f-obra")
//-                     option(value="") Todas
//-                     each obra_social in obras_sociales || []
//-                         option(value=obra_social.nombre)= obra_social.nombre

//-         a.crear.btn.btn-success(href="/agendas/create") Crear Agenda

//-     .cards-container
//-         each agenda in agendas
//-             .card(
//-                 data-especialidad=agenda.especialidad
//-                 data-clasificacion=agenda.clasificacion
//-                 data-medico=`${agenda.apellido} ${agenda.nombre}`
//-                 data-dia=agenda.dias
//-                 data-turno=agenda.estado_turno
//-                 data-obra=agenda.obra_social
//-             )
//-                 .card-header
//-                     h2 #{agenda.apellido} #{agenda.nombre}

//-                 .card-body
//-                     p #{agenda.especialidad}
//-                     p #{agenda.dias}
//-                     p #{agenda.hora_inicio} a #{agenda.hora_fin} hs
//-                     p #{agenda.sucursal}
//-                     p #{agenda.obra_social}

//-                 .card-footer
//-                     a.btn.btn-success(href=`/turnos/${agenda.id}`) Ver Turnos
//-                     a.btn.btn-info(href=`/agendas/edit/${agenda.id}`) Editar
//-                     button.btn.btn-danger(onclick=`confirmDelete(${agenda.id})`) Eliminar
//-                     a.btn.btn-yellow(href=`/turnos/${agenda.id}`) Reservar Turno


//-     script.
//-         // ===============================
//-         // ELIMINAR AGENDA
//-         // ===============================
//-         function confirmDelete(id) {
//-             Swal.fire({
//-                 title: '¿Estás seguro?',
//-                 text: "¡No podrás revertir esto!",
//-                 icon: 'warning',
//-                 showCancelButton: true,
//-                 confirmButtonColor: '#3085d6',
//-                 cancelButtonColor: '#d33',
//-                 confirmButtonText: 'Sí, eliminarlo!'
//-             }).then((result) => {
//-                 if (result.isConfirmed) deleteAgenda(id);
//-             });
//-         }

//-         function deleteAgenda(id) {
//-             fetch(`/agendas/${id}`, { method: 'DELETE' })
//-                 .then(res => {
//-                     if (!res.ok) throw new Error();
//-                     Swal.fire('Eliminado!', 'La agenda ha sido eliminada.', 'success')
//-                         .then(() => location.reload());
//-                 })
//-                 .catch(() => {
//-                     Swal.fire('Error!', 'Hubo un problema al eliminar la agenda.', 'error');
//-                 });
//-         }


   
//-         function applyFilters() {
//-             const filters = {
//-                 especialidad: document.getElementById('f-especialidad').value,
//-                 clasificacion: document.getElementById('f-clasificacion').value,
//-                 medico: document.getElementById('f-medico').value,
//-                 dia: document.getElementById('f-dia').value,
//-                 turno: document.getElementById('f-turno').value,
//-                 obra: document.getElementById('f-obra').value
//-             };

//-             document.querySelectorAll('.card').forEach(card => {
//-                 const match =
//-                     (filters.especialidad === "" || card.dataset.especialidad === filters.especialidad) &&
//-                     (filters.clasificacion === "" || card.dataset.clasificacion === filters.clasificacion) &&
//-                     (filters.medico === "" || card.dataset.medico === filters.medico) &&
//-                     (filters.dia === "" || card.dataset.dia.includes(filters.dia)) &&
//-                     (filters.turno === "" || card.dataset.turno === filters.turno) &&
//-                     (filters.obra === "" || card.dataset.obra === filters.obra);

//-                 card.style.display = match ? "block" : "none";
//-             });
//-         }
//- extends ../layout

//- block contenido
//-     style.
//-         body {
//-             background-color: #eef5ff;
//-             font-family: Arial, sans-serif;
//-         }

//-         .container {
//-             padding: 20px;
//-         }

//-         .center-text {
//-             text-align: center;
//-             font-weight: bold;
//-             margin-bottom: 20px;
//-         }

//-         .right-align {
//-             display: flex;
//-             justify-content: flex-end;
//-             margin-bottom: 10px;
//-         }

//-         /* =======================
//-            FILTROS EN GRID
//-         ======================== */
//-         .filters {
//-             display: grid;
//-             grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
//-             gap: 15px;
//-             margin: 20px 0;
//-             padding: 15px;
//-             background: #ffffff;
//-             border-radius: 8px;
//-             border: 1px solid #d0d7e1;
//-             box-shadow: 0px 2px 4px rgba(0,0,0,0.08);
//-         }

//-         .filter-item p {
//-             font-weight: bold;
//-             margin-bottom: 4px;
//-             font-size: 14px;
//-             color: #333;
//-         }

//-         /* =======================
//-            GRILLA DE CARDS
//-         ======================== */
//-         .cards-container {
//-             display: grid;
//-             grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
//-             gap: 20px;
//-             padding: 10px;
//-         }

//-         .card {
//-             border: 1px solid #ddd;
//-             border-left: 4px solid #1e88e5;
//-             border-radius: 8px;
//-             padding: 16px;
//-             background-color: #ffffff;
//-             box-shadow: 0px 2px 4px rgba(0,0,0,0.1);
//-             transition: transform .15s ease;
//-         }

//-         .card:hover {
//-             transform: translateY(-4px);
//-             box-shadow: 0px 4px 10px rgba(0,0,0,0.15);
//-         }

//-         .card-header h2 {
//-             font-weight: 700;
//-             font-size: 20px;
//-             margin: 0;
//-             color: #2b4c7e;
//-         }

//-         .card-body p {
//-             margin: 4px 0;
//-             color: #444;
//-         }

//-         .card-body p:first-child {
//-             color: #1976d2;
//-             font-weight: bold;
//-             font-size: 17px;
//-         }

//-         .card-body p:nth-child(4) {
//-             color: #ff9800;
//-             font-weight: bold;
//-         }

//-         .card-footer {
//-             margin-top: 12px;
//-             display: flex;
//-             flex-wrap: wrap;
//-             gap: 8px;
//-         }

//-         .btn-yellow {
//-             background-color: #ffeb3b;
//-             color: #000;
//-             border: none;
//-         }

//-         .btn-yellow:hover {
//-             background-color: #fdd835;
//-         }

//-         .crear {
//-             margin: 20px 0;
//-         }


//-     .container
//-         .right-align
//-             a.btn.btn-primary(href="/") Iniciar Sesión

//-         h1.center-text Cartilla Médica

//-         if mensaje
//-             script.
//-                 Swal.fire({
//-                     title: 'Mensaje',
//-                     text: '#{mensaje}',
//-                     icon: 'success',
//-                     confirmButtonText: 'OK'
//-                 });

//-         // ============================
//-         // FILTROS
//-         // ============================
//-         .filters
//-             .filter-item
//-                 p Especialidad
//-                 select.form-select(onchange="applyFilters()" id="f-especialidad")
//-                     option(value="") Todas
//-                     each especialidad in especialidades || []
//-                         option(value=especialidad.nombre)= especialidad.nombre

//-             .filter-item
//-                 p Clasificación
//-                 select.form-select(onchange="applyFilters()" id="f-clasificacion")
//-                     option(value="") Todas
//-                     option Normal
//-                     option Especial
//-                     option Vip

//-             .filter-item
//-                 p Médico
//-                 select.form-select(onchange="applyFilters()" id="f-medico")
//-                     option(value="") Todos
//-                     each medico in medicos || []
//-                         option(value=`${medico.apellido} ${medico.nombre}`)= `${medico.apellido} ${medico.nombre}`

//-             .filter-item
//-                 p Día
//-                 select.form-select(onchange="applyFilters()" id="f-dia")
//-                     option(value="") Todos
//-                     each dia in ["Lunes","Martes","Miercoles","Jueves","Viernes","Sábado","Domingo"]
//-                         option(value=dia)= dia

//-             .filter-item
//-                 p Turnos
//-                 select.form-select(onchange="applyFilters()" id="f-turno")
//-                     option(value="") Todos
//-                     each estado in ["Libre","Reservado","Confirmado","Cancelado","Ausente","Presente","En Consulta","Atendido","No Disponible"]
//-                         option(value=estado)= estado

//-             .filter-item
//-                 p Obra Social
//-                 select.form-select(onchange="applyFilters()" id="f-obra")
//-                     option(value="") Todas
//-                     each obra_social in obras_sociales || []
//-                         option(value=obra_social.nombre)= obra_social.nombre


//-         a.crear.btn.btn-success(href="/agendas/create") Crear Agenda


//-     // ============================
//-     // CARDS
//-     // ============================
//-     .cards-container
//-         each agenda in agendas
//-             .card(
//-                 data-especialidad=agenda.especialidad
//-                 data-clasificacion=agenda.clasificacion
//-                 data-medico=`${agenda.apellido} ${agenda.nombre}`
//-                 data-dia=agenda.dias
//-                 data-turno=agenda.estado_turno
//-                 data-obra=agenda.obra_social
//-             )
//-                 .card-header
//-                     h2 #{agenda.apellido} #{agenda.nombre}

//-                 .card-body
//-                     p #{agenda.especialidad}
//-                     p #{agenda.dias}
//-                     p #{agenda.hora_inicio} a #{agenda.hora_fin} hs
//-                     p #{agenda.sucursal}
//-                     p #{agenda.obra_social}

//-                 .card-footer
//-                     a.btn.btn-success(href=`/turnos/${agenda.id}`) Ver Turnos
//-                     a.btn.btn-info(href=`/agendas/edit/${agenda.id}`) Editar
//-                     button.btn.btn-danger(onclick=`confirmDelete(${agenda.id})`) Eliminar
//-                     a.btn.btn-yellow(href=`/turnos/${agenda.id}`) Reservar Turno


//-     // ============================
//-     // SCRIPTS
//-     // ============================
//-     script.
//-         function confirmDelete(id) {
//-             Swal.fire({
//-                 title: '¿Estás seguro?',
//-                 text: "¡No podrás revertir esto!",
//-                 icon: 'warning',
//-                 showCancelButton: true,
//-                 confirmButtonColor: '#3085d6',
//-                 cancelButtonColor: '#d33',
//-                 confirmButtonText: 'Sí, eliminarlo!'
//-             }).then((result) => {
//-                 if (result.isConfirmed) deleteAgenda(id);
//-             });
//-         }

//-         function deleteAgenda(id) {
//-             fetch(`/agendas/${id}`, { method: 'DELETE' })
//-                 .then(res => {
//-                     if (!res.ok) throw new Error();
//-                     Swal.fire('Eliminado!', 'La agenda ha sido eliminada.', 'success')
//-                         .then(() => location.reload());
//-                 })
//-                 .catch(() => Swal.fire('Error!', 'Hubo un problema al eliminar la agenda.', 'error'));
//-         }

//-         function applyFilters() {
//-             const filters = {
//-                 especialidad: document.getElementById('f-especialidad').value,
//-                 clasificacion: document.getElementById('f-clasificacion').value,
//-                 medico: document.getElementById('f-medico').value,
//-                 dia: document.getElementById('f-dia').value,
//-                 turno: document.getElementById('f-turno').value,
//-                 obra: document.getElementById('f-obra').value
//-             };

//-             document.querySelectorAll('.card').forEach(card => {
//-                 const match =
//-                     (filters.especialidad === "" || card.dataset.especialidad === filters.especialidad) &&
//-                     (filters.clasificacion === "" || card.dataset.clasificacion === filters.clasificacion) &&
//-                     (filters.medico === "" || card.dataset.medico === filters.medico) &&
//-                     (filters.dia === "" || card.dataset.dia.includes(filters.dia)) &&
//-                     (filters.turno === "" || card.dataset.turno === filters.turno) &&
//-                     (filters.obra === "" || card.dataset.obra === filters.obra);

//-                 card.style.display = match ? "block" : "none";
//-             });
//-         }
extends ../layout

block contenido
    style.
        body {
            background-color: #eef5ff;
            font-family: Arial, sans-serif;
        }

        .container {
            padding: 20px;
        }

        .center-text {
            text-align: center;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .right-align {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 10px;
        }

        /* ======================= FILTROS GRID ======================= */
        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 20px 0;
            padding: 15px;
            background: #ffffff;
            border-radius: 8px;
            border: 1px solid #d0d7e1;
            box-shadow: 0px 2px 4px rgba(0,0,0,0.08);
        }

        .filter-item p {
            font-weight: bold;
            margin-bottom: 4px;
            font-size: 14px;
            color: #333;
        }

        /* ======================= CARDS ======================= */
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 10px;
        }

        .card {
            border: 1px solid #ddd;
            border-left: 4px solid #1e88e5;
            border-radius: 8px;
            padding: 16px;
            background-color: #ffffff;
            box-shadow: 0px 2px 4px rgba(0,0,0,0.1);
            transition: transform .15s ease;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0px 4px 10px rgba(0,0,0,0.15);
        }

        .card-header h2 {
            font-weight: 700;
            font-size: 20px;
            margin: 0;
            color: #2b4c7e;
        }

        .card-body p {
            margin: 4px 0;
            color: #444;
        }

        .card-body p:first-child {
            color: #1976d2;
            font-weight: bold;
            font-size: 17px;
        }

        .card-body p:nth-child(4) {
            color: #ff9800;
            font-weight: bold;
        }

        .card-footer {
            margin-top: 12px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .icon-btn {
            font-size: 20px;
            cursor: pointer;
            padding: 6px 10px;
            border-radius: 6px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .icon-view { color: #198754; }
        .icon-edit { color: #0d6efd; }
        .icon-delete { color: #dc3545; }
        .icon-reserve { color: #ff9800; }
        .icon-create { margin-left: 6px; }

        .crear {
            margin: 20px 0;
        }


    .container
        .right-align
            a.btn.btn-primary(href="/") Iniciar Sesión

        h1.center-text Cartilla Médica

        if mensaje
            script.
                Swal.fire({
                    title: 'Mensaje',
                    text: '#{mensaje}',
                    icon: 'success',
                    confirmButtonText: 'OK'
                });

        // ============================ FILTROS ============================
        .filters
            .filter-item
                p Especialidad
                select.form-select(onchange="applyFilters()" id="f-especialidad")
                    option(value="") Todas
                    each especialidad in especialidades || []
                        option(value=especialidad.nombre)= especialidad.nombre

            .filter-item
                p Clasificación
                select.form-select(onchange="applyFilters()" id="f-clasificacion")
                    option(value="") Todas
                    option Normal
                    option Especial
                    option Vip

            .filter-item
                p Médico
                select.form-select(onchange="applyFilters()" id="f-medico")
                    option(value="") Todos
                    each medico in medicos || []
                        option(value=`${medico.apellido} ${medico.nombre}`)= `${medico.apellido} ${medico.nombre}`

            .filter-item
                p Día
                select.form-select(onchange="applyFilters()" id="f-dia")
                    option(value="") Todos
                    each dia in ["Lunes","Martes","Miercoles","Jueves","Viernes","Sábado","Domingo"]
                        option(value=dia)= dia

            .filter-item
                p Turnos
                select.form-select(onchange="applyFilters()" id="f-turno")
                    option(value="") Todos
                    each estado in ["Libre","Reservado","Confirmado","Cancelado","Ausente","Presente","En Consulta","Atendido","No Disponible"]
                        option(value=estado)= estado

            .filter-item
                p Obra Social
                select.form-select(onchange="applyFilters()" id="f-obra")
                    option(value="") Todas
                    each obra_social in obras_sociales || []
                        option(value=obra_social.nombre)= obra_social.nombre

        a.crear.btn.btn-success(href="/agendas/create")
            i.bi.bi-plus-circle.icon-create
            |  Crear Agenda

    // ============================ CARDS ============================
    .cards-container
        each agenda in agendas
            .card(
                data-especialidad=agenda.especialidad
                data-clasificacion=agenda.clasificacion
                data-medico=`${agenda.apellido} ${agenda.nombre}`
                data-dia=agenda.dias
                data-turno=agenda.estado_turno
                data-obra=agenda.obra_social
            )
                .card-header
                    h2 #{agenda.apellido} #{agenda.nombre}

                .card-body
                    p #{agenda.especialidad}
                    p #{agenda.dias}
                    p #{agenda.hora_inicio} a #{agenda.hora_fin} hs
                    p #{agenda.sucursal}
                    p #{agenda.obra_social}

                .card-footer
                    // ---- ICONOS ----
                    a.icon-btn.icon-view(href=`/turnos/${agenda.id}` title="Ver turnos")
                        i.bi.bi-calendar-check

                    a.icon-btn.icon-edit(href=`/agendas/edit/${agenda.id}` title="Editar")
                        i.bi.bi-pencil-square

                    button.icon-btn.icon-delete(onclick=`confirmDelete(${agenda.id})` title="Eliminar")
                        i.bi.bi-trash

                    a.icon-btn.icon-reserve(href=`/turnos/${agenda.id}` title="Reservar turno")
                        i.bi.bi-journal-plus


    // ============================ SCRIPTS ============================
    script.
        function confirmDelete(id) {
            Swal.fire({
                title: '¿Estás seguro?',
                text: "¡No podrás revertir esto!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Sí, eliminarlo!'
            }).then((result) => {
                if (result.isConfirmed) deleteAgenda(id);
            });
        }

        function deleteAgenda(id) {
            fetch(`/agendas/${id}`, { method: 'DELETE' })
                .then(res => {
                    if (!res.ok) throw new Error();
                    Swal.fire('Eliminado!', 'La agenda ha sido eliminada.', 'success')
                        .then(() => location.reload());
                })
                .catch(() =>
                    Swal.fire('Error!', 'Hubo un problema al eliminar la agenda.', 'error')
                );
        }

        function applyFilters() {
            const filters = {
                especialidad: document.getElementById('f-especialidad').value,
                clasificacion: document.getElementById('f-clasificacion').value,
                medico: document.getElementById('f-medico').value,
                dia: document.getElementById('f-dia').value,
                turno: document.getElementById('f-turno').value,
                obra: document.getElementById('f-obra').value
            };

            document.querySelectorAll('.card').forEach(card => {
                const match =
                    (filters.especialidad === "" || card.dataset.especialidad === filters.especialidad) &&
                    (filters.clasificacion === "" || card.dataset.clasificacion === filters.clasificacion) &&
                    (filters.medico === "" || card.dataset.medico === filters.medico) &&
                    (filters.dia === "" || card.dataset.dia.includes(filters.dia)) &&
                    (filters.turno === "" || card.dataset.turno === filters.turno) &&
                    (filters.obra === "" || card.dataset.obra === filters.obra);

                card.style.display = match ? "block" : "none";
            });
        }
