//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark") Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   style.
//-     .center-text { text-align: center; }

//-   script.
//-     function toggleFieldVisibility() {
//-       const fieldId = document.getElementById('id');
//-       fieldId.style.display = 'none';
//-     }

//-   h1.center-text Editar Agenda

//-   // ============================
//-   // ALERTA DE ERROR (si existe)
//-   // ============================
//-   if error
//-     .alert.alert-danger.mt-3(role="alert")
//-       | #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     id="editar-form"
//-     class="needs-validation"
//-     novalidate
//-   )

//-     // =====================
//-     // ID (oculto)
//-     // =====================
//-     div.mb-3
//-       input.form-control(type="number" name="id" id="id" value=agenda.id readonly)

//-     // =====================
//-     // FECHAS
//-     // ==================asasssasasa
//-     div.mb-3
//-       label(for="fecha_creacion" class="form-label") Fecha de Creación:
//-       input.form-control(
//-         type="date"
//-         name="fecha_creacion"
//-         value=agenda.fecha_creacion.toISOString().split('T')[0]
//-         required
//-       )

//-     div.mb-3
//-       label(for="fecha_fin" class="form-label") Fecha de Finalización:
//-       input.form-control(
//-         type="date"
//-         name="fecha_fin"
//-         value=agenda.fecha_fin.toISOString().split('T')[0]
//-         required
//-       )

//-     // =====================
//-     // HORARIOS
//-     // =====================
//-     div.mb-3
//-       label(for="hora_inicio" class="form-label") Hora de Inicio:
//-       input.form-control(
//-         type="time"
//-         name="hora_inicio"
//-         value=agenda.hora_inicio
//-         required
//-       )

//-     div.mb-3
//-       label(for="hora_fin" class="form-label") Hora de Finalización:
//-       input.form-control(
//-         type="time"
//-         name="hora_fin"
//-         value=agenda.hora_fin
//-         required
//-       )

//-     // =====================
//-     // LÍMITES
//-     // =====================
//-     div.mb-3
//-       label(for="limite_sobreturnos" class="form-label") Límite de Sobreturnos:
//-       input.form-control(
//-         type="number"
//-         name="limite_sobreturnos"
//-         value=agenda.limite_sobreturnos
//-         required
//-       )

//-     div.mb-3
//-       label(for="duracion_turnos" class="form-label") Duración Turnos (min):
//-       input.form-control(
//-         type="number"
//-         name="duracion_turnos"
//-         value=agenda.duracion_turnos
//-         required
//-       )

//-     // =====================
//-     // PROFESIONAL (MATRÍCULA)
//-     // =====================
//-     div.mb-3
//-       label(for="matricula" class="form-label") Profesional actual: #{agenda.matricula}
//-       select.form-select(name="matricula" id="matricula" required)
//-         option(value="") Seleccione un profesional
//-         each m in matriculas || []
//-           option(
//-             value=m.matricula,
//-             selected=(m.matricula == agenda.matricula)
//-           )= `${m.matricula} - ${m.nombre} ${m.apellido} (${m.nombreMat})`

//-     // =====================
//-     // SUCURSAL
//-     // (si querés dinámica, pedímelo)
//-     // =====================
//-     div.mb-3
//-       label(for="id_sucursal" class="form-label") Sucursal actual: #{agenda.sucursal}
//-       select.form-select(name="id_sucursal" id="id_sucursal" required)
//-         option(value="") Seleccione una sucursal
//-         option(value="1" selected=(agenda.id_sucursal == 1)) Clinica Argentina, San Luis
//-         option(value="2" selected=(agenda.id_sucursal == 2)) Clinica España, Juana Koslay

//-     // =====================
//-     // CLASIFICACIÓN
//-     // =====================
//-     div.mb-3
//-       label(for="id_clasificacion" class="form-label") Clasificación actual: #{agenda.clasificacion}
//-       select.form-select(name="id_clasificacion" required)
//-         option(value="") Seleccione una clasificación
//-         option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-         option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-         option(value="3" selected=(agenda.id_clasificacion == 3)) VIP
//-     //- div.mb-3
//-     //-   label(for="id_clasificacion" class="form-label") Clasificación actual: #{agenda.clasificacion}
//-     //-   select.form-select(name="id_clasificacion" id="id_clasificacion" required)
//-     //-     option(value="") Seleccione una clasificación
//-     //-     each c in clasificaciones || []
//-     //-       option(
//-     //-         value=c.id,
//-     //-         selected=(c.id == agenda.id_clasificacion)
//-     //-       )= c.nombre

//-     button.btn.btn-success(type="submit") Guardar Cambios

//-   script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
//-   script(src="/js/medicos.js")

//-   // =====================
//-   // VALIDACIÓN FINAL
//-   // =====================
//-   script.
//-     document.addEventListener('DOMContentLoaded', () => {
//-       toggleFieldVisibility();

//-       document.getElementById('editar-form').addEventListener('submit', (e) => {
//-         const selects = ['matricula', 'id_sucursal', 'id_clasificacion'];

//-         for (let id of selects) {
//-           const sel = document.getElementById(id);
//-           if (sel && sel.value === "") {
//-             alert("Debe seleccionar una opción válida en " + id.replace("id_", ""));
//-             e.preventDefault();
//-             return false;
//-           }
//-         }
//-       });
//-     });
//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   h1.text-center.mb-4 Editar Agenda

//-   // ============================
//-   // ALERTA DE ERROR
//-   // ============================
//-   if error
//-     .alert.alert-danger.mt-3(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     id="editar-form"
//-     class="needs-validation"
//-     novalidate
//-   )

//-     // ============================
//-     // ID OCULTO
//-     // ============================
//-     input(type="hidden" name="id" id="id" value=agenda.id)

//-     // ============================
//-     // FECHAS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="fecha_creacion") Fecha de Creación
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           id="fecha_creacion"
//-           value=agenda.fecha_creacion.toISOString().split('T')[0]
//-           required
//-         )
//-       .col-md-6
//-         label.form-label(for="fecha_fin") Fecha de Finalización
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           id="fecha_fin"
//-           value=agenda.fecha_fin.toISOString().split('T')[0]
//-           required
//-         )

//-     // ============================
//-     // HORARIOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="hora_inicio") Hora de Inicio
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           id="hora_inicio"
//-           value=agenda.hora_inicio
//-           required
//-         )
//-       .col-md-6
//-         label.form-label(for="hora_fin") Hora de Finalización
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           id="hora_fin"
//-           value=agenda.hora_fin
//-           required
//-         )

//-     // ============================
//-     // TURNOS Y SOBRETURNOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="duracion_turnos") Duración Turnos (min)
//-         input.form-control(
//-           type="number"
//-           name="duracion_turnos"
//-           id="duracion_turnos"
//-           min="1"
//-           value=agenda.duracion_turnos
//-           required
//-         )
//-       .col-md-6
//-         label.form-label(for="limite_sobreturnos") Límite de Sobreturnos
//-         input.form-control(
//-           type="number"
//-           name="limite_sobreturnos"
//-           id="limite_sobreturnos"
//-           min="0"
//-           value=agenda.limite_sobreturnos
//-           required
//-         )

//-     // ============================
//-     // MÉDICO Y ESPECIALIDAD
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="id_medico") Médico
//-         select.form-select(name="id_medico" id="id_medico" required)
//-           option(value="") Seleccione médico
//-           each m in medicos
//-             option(
//-               value=m.id_medico,
//-               selected=(m.id_medico === agenda.id_medico)
//-             ) #{m.apellido}, #{m.nombre}
//-       .col-md-6
//-         label.form-label(for="id_especialidad") Especialidad
//-         select.form-select(name="id_especialidad" id="id_especialidad" required)
//-           option(value="") Seleccione especialidad
//-           each e in especialidades
//-             option(
//-               value=e.id,
//-               selected=(e.id === agenda.id_especialidad)
//-             ) #{e.nombre}

//-     // ============================
//-     // SUCURSAL Y CLASIFICACIÓN
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="id_sucursal") Sucursal
//-         select.form-select(name="id_sucursal" id="id_sucursal" required)
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España
//-       .col-md-6
//-         label.form-label(for="id_clasificacion") Clasificación
//-         select.form-select(name="id_clasificacion" id="id_clasificacion" required)
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     // ============================
//-     // BOTÓN DE ENVÍO
//-     // ============================
//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar Cambios

//-   // ============================
//-   // SCRIPTS
//-   // ============================
//-   script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
//-   script(src="/js/medicos.js")

//-   script.
//-     document.addEventListener('DOMContentLoaded', () => {
//-       // Validación básica de selects obligatorios
//-       document.getElementById('editar-form').addEventListener('submit', (e) => {
//-         const required = ['id_medico', 'id_especialidad', 'id_sucursal', 'id_clasificacion'];
//-         for (const id of required) {
//-           const el = document.getElementById(id);
//-           if (el && !el.value) {
//-             alert('Debe completar todos los campos obligatorios');
//-             e.preventDefault();
//-             return false;
//-           }
//-         }
//-       });
//-     });












//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   style.
//-     .center-text { text-align: center; }

//-   h1.center-text.mb-4 Editar Agenda

//-   // ============================
//-   // ALERTA DE ERROR
//-   // ============================
//-   if error
//-     .alert.alert-danger.mt-3(role="alert")
//-       | #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     id="editar-form"
//-     class="needs-validation"
//-     novalidate
//-   )

//-     // ============================
//-     // ID OCULTO
//-     // ============================
//-     input(type="hidden" name="id" id="id" value=agenda.id)

//-     // ============================
//-     // FECHAS
//-     // ============================
//-     .mb-3
//-       label(for="fecha_creacion" class="form-label") Fecha de Creación:
//-       input.form-control(
//-         type="date"
//-         name="fecha_creacion"
//-         id="fecha_creacion"
//-         value=agenda.fecha_creacion.toISOString().split('T')[0]
//-         required
//-       )

//-     .mb-3
//-       label(for="fecha_fin" class="form-label") Fecha de Finalización:
//-       input.form-control(
//-         type="date"
//-         name="fecha_fin"
//-         id="fecha_fin"
//-         value=agenda.fecha_fin.toISOString().split('T')[0]
//-         required
//-       )

//-     // ============================
//-     // HORARIOS
//-     // ============================
//-     .mb-3
//-       label(for="hora_inicio" class="form-label") Hora de Inicio:
//-       input.form-control(
//-         type="time"
//-         name="hora_inicio"
//-         id="hora_inicio"
//-         value=agenda.hora_inicio
//-         required
//-       )

//-     .mb-3
//-       label(for="hora_fin" class="form-label") Hora de Finalización:
//-       input.form-control(
//-         type="time"
//-         name="hora_fin"
//-         id="hora_fin"
//-         value=agenda.hora_fin
//-         required
//-       )

//-     // ============================
//-     // LÍMITES
//-     // ============================
//-     .mb-3
//-       label(for="duracion_turnos" class="form-label") Duración Turnos (min):
//-       input.form-control(
//-         type="number"
//-         name="duracion_turnos"
//-         id="duracion_turnos"
//-         min="1"
//-         value=agenda.duracion_turnos
//-         required
//-       )

//-     .mb-3
//-       label(for="limite_sobreturnos" class="form-label") Límite de Sobreturnos:
//-       input.form-control(
//-         type="number"
//-         name="limite_sobreturnos"
//-         id="limite_sobreturnos"
//-         min="0"
//-         value=agenda.limite_sobreturnos
//-         required
//-       )

//-     // ============================
//-     // PROFESIONAL (MATRÍCULA)
//-     // ============================
//-     .mb-3
//-       label(for="matricula" class="form-label") Profesional actual: #{""}
//-       select.form-select(name="matricula" id="matricula" required)
//-         option(value="") Seleccione un profesional
//-         each m in matriculas || []
//-           option(
//-             value=m.matricula
//-             selected=(m.matricula == agenda.matricula)
//-           )= `${m.matricula} - ${m.nombre} ${m.apellido} (${m.nombreMat})`

//-     // ============================
//-     // SUCURSAL
//-     // ============================
//-     .mb-3
//-       label(for="id_sucursal" class="form-label") Sucursal actual: #{agenda.sucursal}
//-       select.form-select(name="id_sucursal" id="id_sucursal" required)
//-         option(value="") Seleccione una sucursal
//-         option(value="1" selected=(agenda.id_sucursal == 1)) Clinica Argentina, San Luis
//-         option(value="2" selected=(agenda.id_sucursal == 2)) Clinica España, Juana Koslay

//-     // ============================
//-     // CLASIFICACIÓN
//-     // ============================
//-     .mb-3
//-       label(for="id_clasificacion" class="form-label") Clasificación actual: #{agenda.clasificacion}
//-       select.form-select(name="id_clasificacion" id="id_clasificacion" required)
//-         option(value="") Seleccione una clasificación
//-         option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-         option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-         option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     // ============================
//-     // BOTÓN DE ENVÍO
//-     // ============================
//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar Cambios

//-   // ============================
//-   // SCRIPTS
//-   // ============================
//-   script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
//-   script(src="/js/medicos.js")

//-   script.
//-     // Ocultar el campo ID
//-     function toggleFieldVisibility() {
//-       const fieldId = document.getElementById('id');
//-       if(fieldId) fieldId.style.display = 'none';
//-     }

//-     document.addEventListener('DOMContentLoaded', () => {
//-       toggleFieldVisibility();

//-       // Validación básica de selects
//-       document.getElementById('editar-form').addEventListener('submit', (e) => {
//-         const selects = ['matricula', 'id_sucursal', 'id_clasificacion'];
//-         for (let id of selects) {
//-           const sel = document.getElementById(id);
//-           if (sel && sel.value === "") {
//-             alert("Debe seleccionar una opción válida en " + id.replace("id_", ""));
//-             e.preventDefault();
//-             return false;
//-           }
//-         }
//-       });
//-     });

//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   h1.text-center.mb-4 Editar Agenda

//-   // ============================
//-   // ALERTA DE ERROR
//-   // ============================
//-   if error
//-     .alert.alert-danger.mt-3(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     id="editar-form"
//-     class="needs-validation"
//-     novalidate
//-   )

//-     // ============================
//-     // ID OCULTO
//-     // ============================
//-     input(type="hidden" name="id" id="id" value=agenda.id)

//-     // ============================
//-     // FECHAS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="fecha_creacion") Fecha de Creación
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           id="fecha_creacion"
//-           value=agenda.fecha_creacion.toISOString().split('T')[0]
//-           required
//-         )
//-       .col-md-6
//-         label.form-label(for="fecha_fin") Fecha de Finalización
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           id="fecha_fin"
//-           value=agenda.fecha_fin.toISOString().split('T')[0]
//-           required
//-         )

//-     // ============================
//-     // HORARIOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="hora_inicio") Hora de Inicio
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           id="hora_inicio"
//-           value=agenda.hora_inicio
//-           required
//-         )
//-       .col-md-6
//-         label.form-label(for="hora_fin") Hora de Finalización
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           id="hora_fin"
//-           value=agenda.hora_fin
//-           required
//-         )

//-     // ============================
//-     // TURNOS Y SOBRETURNOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="duracion_turnos") Duración Turnos (min)
//-         input.form-control(
//-           type="number"
//-           name="duracion_turnos"
//-           id="duracion_turnos"
//-           min="1"
//-           value=agenda.duracion_turnos
//-           required
//-         )
//-       .col-md-6
//-         label.form-label(for="limite_sobreturnos") Límite de Sobreturnos
//-         input.form-control(
//-           type="number"
//-           name="limite_sobreturnos"
//-           id="limite_sobreturnos"
//-           min="0"
//-           value=agenda.limite_sobreturnos
//-           required
//-         )

//-     // ============================
//-     // MÉDICO Y ESPECIALIDAD
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="id_medico") Médico
//-         select.form-select(name="id_medico" id="id_medico" required)
//-           option(value="") Seleccione médico
//-           each m in medicos
//-             option(
//-               value=m.id_medico
//-               selected=(m.id_medico == agenda.id_medico)
//-             ) #{m.apellido}, #{m.nombre}
//-       .col-md-6
//-         label.form-label(for="id_especialidad") Especialidad
//-         select.form-select(name="id_especialidad" id="id_especialidad" required)
//-           option(value="") Seleccione especialidad
//-           each e in especialidades
//-             option(
//-               value=e.id
//-               selected=(e.id == agenda.id_especialidad)
//-             ) #{e.nombre}

//-     // ============================
//-     // SUCURSAL Y CLASIFICACIÓN
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="id_sucursal") Sucursal
//-         select.form-select(name="id_sucursal" id="id_sucursal" required)
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España
//-       .col-md-6
//-         label.form-label(for="id_clasificacion") Clasificación
//-         select.form-select(name="id_clasificacion" id="id_clasificacion" required)
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     // ============================
//-     // BOTÓN DE ENVÍO
//-     // ============================
//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar Cambios

//-   // ============================
//-   // SCRIPTS
//-   // ============================
//-   script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
//-   script(src="/js/medicos.js")

//-   script.
//-     document.addEventListener('DOMContentLoaded', () => {
//-       // Validación básica de selects
//-       document.getElementById('editar-form').addEventListener('submit', (e) => {
//-         const required = ['id_medico', 'id_especialidad', 'id_sucursal', 'id_clasificacion'];
//-         for (const id of required) {
//-           const el = document.getElementById(id);
//-           if (el && !el.value) {
//-             alert('Debe completar todos los campos obligatorios');
//-             e.preventDefault();
//-             return false;
//-           }
//-         }
//-       });
//-     });











    
//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   h3.text-center.mb-4 Editar Agenda

//-   if error
//-     .alert.alert-danger.mt-3(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     id="editar-form"
//-     class="needs-validation"
//-     novalidate
//-   )

//-     // ID oculto
//-     input(type="hidden" name="id" value=agenda.id)

//-     // =====================
//-     // FECHAS
//-     // =====================
//-     .row.mb-3
//-       .col-md-6
//-         label.form-label Fecha de creación
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           value=agenda.fecha_creacion.toISOString().split('T')[0]
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Fecha de finalización
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           value=agenda.fecha_fin.toISOString().split('T')[0]
//-           required
//-         )

//-     // =====================
//-     // HORARIOS
//-     // =====================
//-     .row.mb-3
//-       .col-md-6
//-         label.form-label Hora inicio
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           value=agenda.hora_inicio
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Hora fin
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           value=agenda.hora_fin
//-           required
//-         )

//-     // =====================
//-     // CONFIGURACIÓN
//-     // =====================
//-     .row.mb-3
//-       .col-md-6
//-         label.form-label Límite sobreturnos
//-         input.form-control(
//-           type="number"
//-           name="limite_sobreturnos"
//-           value=agenda.limite_sobreturnos
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Duración turnos (min)
//-         input.form-control(
//-           type="number"
//-           name="duracion_turnos"
//-           value=agenda.duracion_turnos
//-           required
//-         )

//-     // =====================
//-     // PROFESIONAL
//-     // =====================
//-     .mb-3
//-       label.form-label Profesional
//-       select.form-select(name="matricula" id="matricula" required)
//-         option(value="") Seleccione un profesional
//-         each m in matriculas || []
//-           option(
//-             value=m.matricula
//-             selected=(m.matricula == agenda.matricula)
//-           ) #{m.matricula} - #{m.nombre} #{m.apellido}

//-     // =====================
//-     // SUCURSAL + CLASIFICACIÓN
//-     // =====================
//-     .row.mb-4
//-       .col-md-6
//-         label.form-label Sucursal
//-         select.form-select(name="id_sucursal" id="id_sucursal" required)
//-           option(value="") Seleccione una sucursal
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España

//-       .col-md-6
//-         label.form-label Clasificación
//-         select.form-select(name="id_clasificacion" id="id_clasificacion" required)
//-           option(value="") Seleccione clasificación
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     // =====================
//-     // BOTÓN
//-     // =====================
//-     .text-center
//-       button.btn.btn-success.px-5(type="submit") Guardar cambios

//-   script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
//-   script(src="/js/medicos.js")

//-   script.
//-     document.getElementById('editar-form').addEventListener('submit', e => {
//-       const required = ['matricula', 'id_sucursal', 'id_clasificacion'];
//-       for (const id of required) {
//-         const el = document.getElementById(id);
//-         if (el && !el.value) {
//-           alert('Debe completar todos los campos');
//-           e.preventDefault();
//-           return;
//-         }
//-       }
    });


//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver

//-   h3.text-center.mb-4 Editar Agenda

//-   if error
//-     .alert.alert-danger(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     class="needs-validation"
//-     novalidate
//-   )

//-     input(type="hidden" name="id" value=agenda.id)

//-     // ======================
//-     // FECHAS
//-     // ======================
//-     .row.g-3
//-       .col-md-6
//-         label.form-label Fecha inicio
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           value=agenda.fecha_creacion.toISOString().split('T')[0]
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Fecha fin
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           value=agenda.fecha_fin.toISOString().split('T')[0]
//-           required
//-         )

//-     // ======================
//-     // HORARIOS
//-     // ======================
//-     .row.g-3.mt-1
//-       .col-md-6
//-         label.form-label Hora inicio
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           value=agenda.hora_inicio
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Hora fin
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           value=agenda.hora_fin
//-           required
//-         )

//-     // ======================
//-     // TURNOS
//-     // ======================
//-     .row.g-3.mt-1
//-       .col-md-6
//-         label.form-label Duración (min)
//-         input.form-control(
//-           type="number"
//-           name="duracion_turnos"
//-           value=agenda.duracion_turnos
//-           min="1"
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Sobreturnos
//-         input.form-control(
//-           type="number"
//-           name="limite_sobreturnos"
//-           value=agenda.limite_sobreturnos
//-           min="0"
//-           required
//-         )

//-     // ======================
//-     // MÉDICO Y ESPECIALIDAD
//-     // ======================
//-     .row.g-3.mt-1
//-       .col-md-6
//-         label.form-label Médico
//-         select.form-select(name="id_medico" required)
//-           option(value="") Seleccione médico
//-           each m in medicos
//-             option(
//-               value=m.id_medico
//-               selected=(m.id_medico === agenda.id_medico)
//-             ) #{m.apellido}, #{m.nombre}

//-       .col-md-6
//-         label.form-label Especialidad
//-         select.form-select(name="id_especialidad" required)
//-           option(value="") Seleccione especialidad
//-           each e in especialidades
//-             option(
//-               value=e.id
//-               selected=(e.id === agenda.id_especialidad)
//-             ) #{e.nombre}

//-     // ======================
//-     // SUCURSAL / CLASIFICACIÓN
//-     // ======================
//-     .row.g-3.mt-1
//-       .col-md-6
//-         label.form-label Sucursal
//-         select.form-select(name="id_sucursal" required)
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España

//-       .col-md-6
//-         label.form-label Clasificación
//-         select.form-select(name="id_clasificacion" required)
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     // ======================
//-     // BOTÓN
//-     // ======================
//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar cambios


//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver

//-   h3.text-center.mb-4 Editar Agenda

//-   if error
//-     .alert.alert-danger(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     class="needs-validation"
//-     novalidate
//-   )

//-     input(type="hidden" name="id" value=agenda.id)

//-     // ======================
//-     // FECHAS
//-     // ======================
//-     .row.g-3
//-       .col-md-6
//-         label.form-label Fecha inicio
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           value=agenda.fecha_creacion.toISOString().split('T')[0]
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Fecha fin
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           value=agenda.fecha_fin.toISOString().split('T')[0]
//-           required
//-         )

//-     // ======================
//-     // HORARIOS
//-     // ======================
//-     .row.g-3.mt-1
//-       .col-md-6
//-         label.form-label Hora inicio
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           value=agenda.hora_inicio
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Hora fin
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           value=agenda.hora_fin
//-           required
//-         )

//-     // ======================
//-     // TURNOS
//-     // ======================
//-     .row.g-3.mt-1
//-       .col-md-6
//-         label.form-label Duración (min)
//-         input.form-control(
//-           type="number"
//-           name="duracion_turnos"
//-           value=agenda.duracion_turnos
//-           min="1"
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Sobreturnos
//-         input.form-control(
//-           type="number"
//-           name="limite_sobreturnos"
//-           value=agenda.limite_sobreturnos
//-           min="0"
//-           required
//-         )

//-     // ======================
//-     // MÉDICO Y ESPECIALIDAD
//-     // ======================
//-     .row.g-3.mt-1
//-       .col-md-6
//-         label.form-label Médico
//-         select.form-select(name="id_medico" required)
//-           option(value="") Seleccione médico
//-           each m in medicos
//-             option(
//-               value=m.id_medico
//-               selected=(m.id_medico == agenda.id_medico)
//-             ) #{m.apellido}, #{m.nombre}

//-       .col-md-6
//-         label.form-label Especialidad
//-         select.form-select(name="id_especialidad" required)
//-           option(value="") Seleccione especialidad
//-           each e in especialidades
//-             option(
//-               value=e.id
//-               selected=(e.id == agenda.id_especialidad)
//-             ) #{e.nombre}

//-     // ======================
//-     // SUCURSAL / CLASIFICACIÓN
//-     // ======================
//-     .row.g-3.mt-1
//-       .col-md-6
//-         label.form-label Sucursal
//-         select.form-select(name="id_sucursal" required)
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España

//-       .col-md-6
//-         label.form-label Clasificación
//-         select.form-select(name="id_clasificacion" required)
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     // ======================
//-     // BOTÓN
//-     // ======================
//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar cambios












//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   h1.text-center.mb-4 Editar Agenda

//-   // ============================
//-   // ALERTA DE ERROR
//-   // ============================
//-   if error
//-     .alert.alert-danger.mt-3(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     id="editar-form"
//-     class="needs-validation"
//-     novalidate
//-   )

//-     input(type="hidden" name="id" id="id" value=agenda.id)

//-     // ============================
//-     // FECHAS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="fecha_creacion") 
//-           | Fecha de Creación
//-           if erroresCampos && erroresCampos.fecha_creacion
//-             span.text-danger * 
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           id="fecha_creacion"
//-           value=agenda.fecha_creacion ? agenda.fecha_creacion.toISOString().split('T')[0] : ''
//-           required
//-         )
//-       .col-md-6
//-         label.form-label(for="fecha_fin") 
//-           | Fecha de Finalización
//-           if erroresCampos && erroresCampos.fecha_fin
//-             span.text-danger * 
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           id="fecha_fin"
//-           value=agenda.fecha_fin ? agenda.fecha_fin.toISOString().split('T')[0] : ''
//-           required
//-         )

//-     // ============================
//-     // HORARIOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="hora_inicio") 
//-           | Hora de Inicio
//-           if erroresCampos && erroresCampos.hora_inicio
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           id="hora_inicio"
//-           value=agenda.hora_inicio || ''
//-           required
//-         )
//-       .col-md-6
//-         label.form-label(for="hora_fin") 
//-           | Hora de Finalización
//-           if erroresCampos && erroresCampos.hora_fin
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           id="hora_fin"
//-           value=agenda.hora_fin || ''
//-           required
//-         )

//-     // ============================
//-     // TURNOS Y SOBRETURNOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="duracion_turnos") 
//-           | Duración Turnos (min)
//-           if erroresCampos && erroresCampos.duracion_turnos
//-             span.text-danger *
//-         input.form-control(
//-           type="number"
//-           name="duracion_turnos"
//-           id="duracion_turnos"
//-           min="1"
//-           value=agenda.duracion_turnos || ''
//-           required
//-         )
//-       .col-md-6
//-         label.form-label(for="limite_sobreturnos") 
//-           | Límite de Sobreturnos
//-           if erroresCampos && erroresCampos.limite_sobreturnos
//-             span.text-danger *
//-         input.form-control(
//-           type="number"
//-           name="limite_sobreturnos"
//-           id="limite_sobreturnos"
//-           min="0"
//-           value=agenda.limite_sobreturnos || ''
//-           required
//-         )

//-     // ============================
//-     // MÉDICO Y ESPECIALIDAD
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="id_medico") 
//-           | Médico
//-           if erroresCampos && erroresCampos.id_medico
//-             span.text-danger *
//-         select.form-select(name="id_medico" id="id_medico" required)
//-           option(value="") Seleccione médico
//-           each m in medicos
//-             option(
//-               value=m.id_medico,
//-               selected=(m.id_medico == agenda.id_medico)
//-             ) #{m.apellido}, #{m.nombre}
//-       .col-md-6
//-         label.form-label(for="id_especialidad") 
//-           | Especialidad
//-           if erroresCampos && erroresCampos.id_especialidad
//-             span.text-danger *
//-         select.form-select(name="id_especialidad" id="id_especialidad" required)
//-           option(value="") Seleccione especialidad
//-           each e in especialidades
//-             option(
//-               value=e.id,
//-               selected=(e.id == agenda.id_especialidad)
//-             ) #{e.nombre}

//-     // ============================
//-     // SUCURSAL Y CLASIFICACIÓN
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label(for="id_sucursal") 
//-           | Sucursal
//-           if erroresCampos && erroresCampos.id_sucursal
//-             span.text-danger *
//-         select.form-select(name="id_sucursal" id="id_sucursal" required)
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España
//-       .col-md-6
//-         label.form-label(for="id_clasificacion") 
//-           | Clasificación
//-           if erroresCampos && erroresCampos.id_clasificacion
//-             span.text-danger *
//-         select.form-select(name="id_clasificacion" id="id_clasificacion" required)
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     // ============================
//-     // BOTÓN DE ENVÍO
//-     // ============================
//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar Cambios

//-   // ============================
//-   // SCRIPTS
//-   // ============================
//-   script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
//-   script(src="/js/medicos.js")

//-   script.
//-     document.addEventListener('DOMContentLoaded', () => {
//-       // Validación básica de selects obligatorios
//-       document.getElementById('editar-form').addEventListener('submit', (e) => {
//-         const required = ['id_medico', 'id_especialidad', 'id_sucursal', 'id_clasificacion'];
//-         for (const id of required) {
//-           const el = document.getElementById(id);
//-           if (el && !el.value) {
//-             alert('Debe completar todos los campos obligatorios');
//-             e.preventDefault();
//-             return false;
//-           }
//-         }
//-       });
//-     });



//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   h1.text-center.mb-4 Editar Agenda

//-   // ============================
//-   // ALERTA DE ERROR GENERAL
//-   // ============================
//-   if error
//-     .alert.alert-danger.mt-3(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     id="editar-form"
//-     class="needs-validation"
//-     novalidate
//-   )

//-     input(type="hidden" name="id" value=agenda.id)

//-     // ============================
//-     // FECHAS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label Fecha de Creación
//-           if erroresCampos && erroresCampos.fecha_creacion
//-             span.text-danger *
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           value=agenda.fecha_creacion ? agenda.fecha_creacion.toISOString().split('T')[0] : ''
//-           class=(erroresCampos && erroresCampos.fecha_creacion ? 'is-invalid' : '')
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Fecha de Finalización
//-           if erroresCampos && erroresCampos.fecha_fin
//-             span.text-danger *
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           value=agenda.fecha_fin ? agenda.fecha_fin.toISOString().split('T')[0] : ''
//-           class=(erroresCampos && erroresCampos.fecha_fin ? 'is-invalid' : '')
//-           required
//-         )

//-     // ============================
//-     // HORARIOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label Hora de Inicio
//-           if erroresCampos && erroresCampos.hora_inicio
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           value=agenda.hora_inicio
//-           class=(erroresCampos && erroresCampos.hora_inicio ? 'is-invalid' : '')
//-           required
//-         )

//-       .col-md-6
//-         label.form-label Hora de Finalización
//-           if erroresCampos && erroresCampos.hora_fin
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           value=agenda.hora_fin
//-           class=(erroresCampos && erroresCampos.hora_fin ? 'is-invalid' : '')
//-           required
//-         )

//-     // ============================
//-     // TURNOS Y SOBRETURNOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label Duración Turnos (min)
//-           if erroresCampos && erroresCampos.duracion_turnos
//-             span.text-danger *
//-         select.form-select(
//-           name="duracion_turnos"
//-           class=(erroresCampos && erroresCampos.duracion_turnos ? 'is-invalid' : '')
//-           required
//-         )
//-           option(value="") Seleccione duración
//-           each d in [15,20,25,30,35,40,45,50,60]
//-             option(value=d selected=(agenda.duracion_turnos == d))= d

//-       .col-md-6
//-         label.form-label Límite de Sobreturnos
//-           if erroresCampos && erroresCampos.limite_sobreturnos
//-             span.text-danger *
//-         input.form-control(
//-           type="number"
//-           name="limite_sobreturnos"
//-           min="0"
//-           value=agenda.limite_sobreturnos
//-           class=(erroresCampos && erroresCampos.limite_sobreturnos ? 'is-invalid' : '')
//-           required
//-         )

//-     // ============================
//-     // MÉDICO Y ESPECIALIDAD
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label Médico
//-           if erroresCampos && erroresCampos.id_medico
//-             span.text-danger *
//-         select.form-select(
//-           name="id_medico"
//-           class=(erroresCampos && erroresCampos.id_medico ? 'is-invalid' : '')
//-           required
//-         )
//-           option(value="") Seleccione médico
//-           each m in medicos
//-             option(
//-               value=m.id_medico
//-               selected=(m.id_medico == agenda.id_medico)
//-             )= m.apellido + ', ' + m.nombre

//-       .col-md-6
//-         label.form-label Especialidad
//-           if erroresCampos && erroresCampos.id_especialidad
//-             span.text-danger *
//-         select.form-select(
//-           name="id_especialidad"
//-           class=(erroresCampos && erroresCampos.id_especialidad ? 'is-invalid' : '')
//-           required
//-         )
//-           option(value="") Seleccione especialidad
//-           each e in especialidades
//-             option(
//-               value=e.id
//-               selected=(e.id == agenda.id_especialidad)
//-             )= e.nombre

//-     // ============================
//-     // SUCURSAL Y CLASIFICACIÓN
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label Sucursal
//-           if erroresCampos && erroresCampos.id_sucursal
//-             span.text-danger *
//-         select.form-select(
//-           name="id_sucursal"
//-           class=(erroresCampos && erroresCampos.id_sucursal ? 'is-invalid' : '')
//-           required
//-         )
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España

//-       .col-md-6
//-         label.form-label Clasificación
//-           if erroresCampos && erroresCampos.id_clasificacion
//-             span.text-danger *
//-         select.form-select(
//-           name="id_clasificacion"
//-           class=(erroresCampos && erroresCampos.id_clasificacion ? 'is-invalid' : '')
//-           required
//-         )
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     // ============================
//-     // BOTÓN
//-     // ============================
//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar Cambios

//-   // ============================
//-   // SCRIPTS
//-   // ============================
//-   script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
//-   script(src="/js/medicos.js")

//-   script.
//-     document.getElementById('editar-form').addEventListener('submit', function (e) {
//-       const fechaInicio = document.querySelector('[name="fecha_creacion"]').value;
//-       const fechaFin = document.querySelector('[name="fecha_fin"]').value;
//-       const horaInicio = document.querySelector('[name="hora_inicio"]').value;
//-       const horaFin = document.querySelector('[name="hora_fin"]').value;

//-       if (fechaInicio && fechaFin && fechaInicio > fechaFin) {
//-         alert('La fecha de inicio no puede ser mayor a la fecha de fin');
//-         e.preventDefault();
//-       }

//-       if (horaInicio && horaFin && horaInicio >= horaFin) {
//-         alert('La hora de inicio debe ser menor a la hora de fin');
//-         e.preventDefault();
//-       }
//-     });







//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   h1.text-center.mb-4 Editar Agenda

//-   // ============================
//-   // ALERTA GENERAL
//-   // ============================
//-   if error
//-     .alert.alert-danger.mt-3(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     id="editar-form"
//-     novalidate
//-   )

//-     input(type="hidden" name="id" value=agenda.id)

//-     // ============================
//-     // FECHAS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Fecha de Creación
//-           if erroresCampos && erroresCampos.fecha_creacion
//-             span.text-danger *
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           required
//-           class=(erroresCampos && erroresCampos.fecha_creacion ? 'is-invalid' : '')
//-           value=agenda.fecha_creacion ? agenda.fecha_creacion.toISOString().split('T')[0] : ''
//-         )

//-       .col-md-6
//-         label.form-label
//-           | Fecha de Finalización
//-           if erroresCampos && erroresCampos.fecha_fin
//-             span.text-danger *
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           required
//-           class=(erroresCampos && erroresCampos.fecha_fin ? 'is-invalid' : '')
//-           value=agenda.fecha_fin ? agenda.fecha_fin.toISOString().split('T')[0] : ''
//-         )

//-     // ============================
//-     // HORARIOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Hora Inicio
//-           if erroresCampos && erroresCampos.hora_inicio
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           required
//-           class=(erroresCampos && erroresCampos.hora_inicio ? 'is-invalid' : '')
//-           value=agenda.hora_inicio
//-         )

//-       .col-md-6
//-         label.form-label
//-           | Hora Fin
//-           if erroresCampos && erroresCampos.hora_fin
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           required
//-           class=(erroresCampos && erroresCampos.hora_fin ? 'is-invalid' : '')
//-           value=agenda.hora_fin
//-         )

//-     // ============================
//-     // TURNOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Duración del turno
//-           if erroresCampos && erroresCampos.duracion_turnos
//-             span.text-danger *
//-         select.form-select(
//-           name="duracion_turnos"
//-           required
//-           class=(erroresCampos && erroresCampos.duracion_turnos ? 'is-invalid' : '')
//-         )
//-           option(value="") Seleccione duración
//-           each d in [15,20,25,30,35,40,45,50,60]
//-             option(
//-               value=d
//-               selected=(agenda.duracion_turnos == d)
//-             ) #{d} minutos

//-       .col-md-6
//-         label.form-label
//-           | Límite de Sobreturnos
//-           if erroresCampos && erroresCampos.limite_sobreturnos
//-             span.text-danger *
//-         input.form-control(
//-           type="number"
//-           min="0"
//-           name="limite_sobreturnos"
//-           required
//-           class=(erroresCampos && erroresCampos.limite_sobreturnos ? 'is-invalid' : '')
//-           value=agenda.limite_sobreturnos
//-         )

//-     // ============================
//-     // MÉDICO / ESPECIALIDAD
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Médico
//-           if erroresCampos && erroresCampos.id_medico
//-             span.text-danger *
//-         select.form-select(
//-           name="id_medico"
//-           required
//-           class=(erroresCampos && erroresCampos.id_medico ? 'is-invalid' : '')
//-         )
//-           option(value="") Seleccione médico
//-           each m in medicos
//-             option(
//-               value=m.id_medico
//-               selected=(m.id_medico == agenda.id_medico)
//-             ) #{m.apellido} #{m.nombre}

//-       .col-md-6
//-         label.form-label
//-           | Especialidad
//-           if erroresCampos && erroresCampos.id_especialidad
//-             span.text-danger *
//-         select.form-select(
//-           name="id_especialidad"
//-           required
//-           class=(erroresCampos && erroresCampos.id_especialidad ? 'is-invalid' : '')
//-         )
//-           option(value="") Seleccione especialidad
//-           each e in especialidades
//-             option(
//-               value=e.id
//-               selected=(e.id == agenda.id_especialidad)
//-             ) #{e.nombre}

//-     // ============================
//-     // SUCURSAL / CLASIFICACIÓN
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Sucursal
//-           if erroresCampos && erroresCampos.id_sucursal
//-             span.text-danger *
//-         select.form-select(
//-           name="id_sucursal"
//-           required
//-           class=(erroresCampos && erroresCampos.id_sucursal ? 'is-invalid' : '')
//-         )
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España

//-       .col-md-6
//-         label.form-label
//-           | Clasificación
//-           if erroresCampos && erroresCampos.id_clasificacion
//-             span.text-danger *
//-         select.form-select(
//-           name="id_clasificacion"
//-           required
//-           class=(erroresCampos && erroresCampos.id_clasificacion ? 'is-invalid' : '')
//-         )
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar Cambios

//-   // ============================
//-   // VALIDACIÓN FRONTEND REAL
//-   // ============================
//-   script.
//-     document.getElementById('editar-form').addEventListener('submit', function (e) {
//-       let valido = true;

//-       const campos = this.querySelectorAll('[required]');
//-       campos.forEach(c => c.classList.remove('is-invalid'));

//-       campos.forEach(campo => {
//-         if (!campo.value) {
//-           campo.classList.add('is-invalid');
//-           valido = false;
//-         }
//-       });

//-       const f1 = this.fecha_creacion;
//-       const f2 = this.fecha_fin;
//-       if (f1.value && f2.value && f1.value > f2.value) {
//-         f1.classList.add('is-invalid');
//-         f2.classList.add('is-invalid');
//-         valido = false;
//-       }

//-       const h1 = this.hora_inicio;
//-       const h2 = this.hora_fin;
//-       if (h1.value && h2.value && h1.value >= h2.value) {
//-         h1.classList.add('is-invalid');
//-         h2.classList.add('is-invalid');
//-         valido = false;
//-       }

//-       if (!valido) e.preventDefault();
//-     });

//-   script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")





//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   h1.text-center.mb-4 Editar Agenda

//-   // ============================
//-   // ALERTA GENERAL
//-   // ============================
//-   if error
//-     .alert.alert-danger.mt-3(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     id="editar-form"
//-     novalidate
//-   )

//-     input(type="hidden" name="id" value=agenda.id)

//-     // ============================
//-     // FECHAS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Fecha de Creación
//-           if erroresCampos && erroresCampos.fecha_creacion
//-             span.text-danger *
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           required
//-           class=(erroresCampos && erroresCampos.fecha_creacion ? 'is-invalid' : '')
//-           value=agenda.fecha_creacion ? agenda.fecha_creacion.toISOString().split('T')[0] : ''
//-         )

//-       .col-md-6
//-         label.form-label
//-           | Fecha de Finalización
//-           if erroresCampos && erroresCampos.fecha_fin
//-             span.text-danger *
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           required
//-           class=(erroresCampos && erroresCampos.fecha_fin ? 'is-invalid' : '')
//-           value=agenda.fecha_fin ? agenda.fecha_fin.toISOString().split('T')[0] : ''
//-         )

//-     // ============================
//-     // HORARIOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Hora Inicio
//-           if erroresCampos && erroresCampos.hora_inicio
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           required
//-           class=(erroresCampos && erroresCampos.hora_inicio ? 'is-invalid' : '')
//-           value=agenda.hora_inicio
//-         )

//-       .col-md-6
//-         label.form-label
//-           | Hora Fin
//-           if erroresCampos && erroresCampos.hora_fin
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           required
//-           class=(erroresCampos && erroresCampos.hora_fin ? 'is-invalid' : '')
//-           value=agenda.hora_fin
//-         )

//-     // ============================
//-     // TURNOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Duración del turno
//-           if erroresCampos && erroresCampos.duracion_turnos
//-             span.text-danger *
//-         select.form-select(
//-           name="duracion_turnos"
//-           required
//-           class=(erroresCampos && erroresCampos.duracion_turnos ? 'is-invalid' : '')
//-         )
//-           option(value="") Seleccione duración
//-           each d in [15,20,25,30,35,40,45,50,60]
//-             option(value=d selected=(agenda.duracion_turnos == d)) #{d} minutos

//-       .col-md-6
//-         label.form-label
//-           | Límite de Sobreturnos
//-           if erroresCampos && erroresCampos.limite_sobreturnos
//-             span.text-danger *
//-         input.form-control(
//-           type="number"
//-           min="0"
//-           name="limite_sobreturnos"
//-           required
//-           class=(erroresCampos && erroresCampos.limite_sobreturnos ? 'is-invalid' : '')
//-           value=agenda.limite_sobreturnos
//-         )

//-     // ============================
//-     // MÉDICO / ESPECIALIDAD
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Médico
//-           if erroresCampos && erroresCampos.id_medico
//-             span.text-danger *
//-         select.form-select(
//-           name="id_medico"
//-           id="medicoSelect"
//-           required
//-           class=(erroresCampos && erroresCampos.id_medico ? 'is-invalid' : '')
//-         )
//-           option(value="") Seleccione médico
//-           each m in medicos
//-             option(
//-               value=m.id_medico
//-               selected=(m.id_medico == agenda.id_medico)
//-             ) #{m.apellido} #{m.nombre}

//-       .col-md-6
//-         label.form-label
//-           | Especialidad
//-           if erroresCampos && erroresCampos.id_especialidad
//-             span.text-danger *
//-         select.form-select(
//-           name="id_especialidad"
//-           id="especialidadSelect"
//-           required
//-           class=(erroresCampos && erroresCampos.id_especialidad ? 'is-invalid' : '')
//-         )
//-           option(value="") Seleccione especialidad
//-           each e in especialidades
//-             option(
//-               value=e.id
//-               selected=(e.id == agenda.id_especialidad)
//-             ) #{e.nombre}

//-     // ============================
//-     // SUCURSAL / CLASIFICACIÓN
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Sucursal
//-           if erroresCampos && erroresCampos.id_sucursal
//-             span.text-danger *
//-         select.form-select(
//-           name="id_sucursal"
//-           required
//-           class=(erroresCampos && erroresCampos.id_sucursal ? 'is-invalid' : '')
//-         )
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España

//-       .col-md-6
//-         label.form-label
//-           | Clasificación
//-           if erroresCampos && erroresCampos.id_clasificacion
//-             span.text-danger *
//-         select.form-select(
//-           name="id_clasificacion"
//-           required
//-           class=(erroresCampos && erroresCampos.id_clasificacion ? 'is-invalid' : '')
//-         )
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar Cambios

//-   // ============================
//-   // JS: CAMBIO DINÁMICO DE ESPECIALIDADES
//-   // ============================
//-   script.
//-       document.addEventListener('DOMContentLoaded', () => {
//-         const medicoSelect = document.getElementById('medicoSelect');
//-         const especialidadSelect = document.getElementById('especialidadSelect');

//-         medicoSelect.addEventListener('change', async () => {
//-           const idMedico = medicoSelect.value;

//-           especialidadSelect.innerHTML =
//-             '<option value="">Seleccione una especialidad</option>';

//-           if (!idMedico) return;

//-           try {
//-             const res = await fetch(`/medicos/${idMedico}/especialidades`);
//-             const especialidades = await res.json();

//-             if (!Array.isArray(especialidades) || especialidades.length === 0) {
//-               especialidadSelect.innerHTML +=
//-                 '<option value="">Sin especialidades activas</option>';
//-               return;
//-             }

//-             especialidades.forEach(e => {
//-               especialidadSelect.innerHTML +=
//-                 `<option value="${e.id || e.id_especialidad}">
//-                   ${e.nombre}
//-                 </option>`;
//-             });

//-           } catch (err) {
//-             console.error('Error cargando especialidades', err);
//-           }
//-         });
//-       });







//- extends ../layout

//- block contenido
//-   a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver
//-   link(rel="stylesheet" href="/css/style.css")

//-   h1.text-center.mb-4 Editar Agenda

//-   // ============================
//-   // ALERTA GENERAL
//-   // ============================
//-   if error
//-     .alert.alert-danger.mt-3(role="alert") #{error}

//-   form(
//-     action=`/agendas/update/${agenda.id}`
//-     method="POST"
//-     novalidate
//-   )
//-     input(type="hidden" name="id" value=agenda.id)

//-     // ============================
//-     // FECHAS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Fecha de Creación
//-           if erroresCampos && erroresCampos.fecha_creacion
//-             span.text-danger *
//-         input.form-control(
//-           type="date"
//-           name="fecha_creacion"
//-           required
//-           class=(erroresCampos && erroresCampos.fecha_creacion ? 'is-invalid' : '')
//-           value=agenda.fecha_creacion ? agenda.fecha_creacion.toISOString().split('T')[0] : ''
//-         )

//-       .col-md-6
//-         label.form-label
//-           | Fecha de Finalización
//-           if erroresCampos && erroresCampos.fecha_fin
//-             span.text-danger *
//-         input.form-control(
//-           type="date"
//-           name="fecha_fin"
//-           required
//-           class=(erroresCampos && erroresCampos.fecha_fin ? 'is-invalid' : '')
//-           value=agenda.fecha_fin ? agenda.fecha_fin.toISOString().split('T')[0] : ''
//-         )

//-     // ============================
//-     // HORARIOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Hora Inicio
//-           if erroresCampos && erroresCampos.hora_inicio
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_inicio"
//-           required
//-           class=(erroresCampos && erroresCampos.hora_inicio ? 'is-invalid' : '')
//-           value=agenda.hora_inicio
//-         )

//-       .col-md-6
//-         label.form-label
//-           | Hora Fin
//-           if erroresCampos && erroresCampos.hora_fin
//-             span.text-danger *
//-         input.form-control(
//-           type="time"
//-           name="hora_fin"
//-           required
//-           class=(erroresCampos && erroresCampos.hora_fin ? 'is-invalid' : '')
//-           value=agenda.hora_fin
//-         )

//-     // ============================
//-     // TURNOS
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Duración del turno
//-           if erroresCampos && erroresCampos.duracion_turnos
//-             span.text-danger *
//-         select.form-select(
//-           name="duracion_turnos"
//-           required
//-           class=(erroresCampos && erroresCampos.duracion_turnos ? 'is-invalid' : '')
//-         )
//-           option(value="") Seleccione duración
//-           each d in [15,20,25,30,35,40,45,50,60]
//-             option(value=d selected=(agenda.duracion_turnos == d)) #{d} minutos

//-       .col-md-6
//-         label.form-label
//-           | Límite de Sobreturnos
//-           if erroresCampos && erroresCampos.limite_sobreturnos
//-             span.text-danger *
//-         input.form-control(
//-           type="number"
//-           min="0"
//-           name="limite_sobreturnos"
//-           required
//-           class=(erroresCampos && erroresCampos.limite_sobreturnos ? 'is-invalid' : '')
//-           value=agenda.limite_sobreturnos
//-         )

//-     // ============================
//-     // MÉDICO / ESPECIALIDAD
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Médico
//-           if erroresCampos && erroresCampos.id_medico
//-             span.text-danger *

//-         // ✔️ SIEMPRE ID
//-         select#medicoSelect.form-select(
//-           name="id_medico"
//-           required
//-           class=(erroresCampos && erroresCampos.id_medico ? 'is-invalid' : '')
//-         )
//-           option(value="") Seleccione médico
//-           each m in medicos
//-             option(
//-               value=m.id_medico
//-               selected=(m.id_medico == agenda.id_medico)
//-             ) #{m.apellido} #{m.nombre}

//-       .col-md-6
//-         label.form-label
//-           | Especialidad
//-           if erroresCampos && erroresCampos.id_especialidad
//-             span.text-danger *

//-         // ✔️ SIEMPRE ID
//-         select#especialidadSelect.form-select(
//-           name="id_especialidad"
//-           required
//-           class=(erroresCampos && erroresCampos.id_especialidad ? 'is-invalid' : '')
//-         )
//-           option(value="") Seleccione especialidad
//-           each e in especialidades
//-             option(
//-               value=e.id
//-               selected=(e.id == agenda.id_especialidad)
//-             ) #{e.nombre}

//-     // ============================
//-     // SUCURSAL / CLASIFICACIÓN
//-     // ============================
//-     .row.g-3.mb-3
//-       .col-md-6
//-         label.form-label
//-           | Sucursal
//-           if erroresCampos && erroresCampos.id_sucursal
//-             span.text-danger *
//-         select.form-select(
//-           name="id_sucursal"
//-           required
//-           class=(erroresCampos && erroresCampos.id_sucursal ? 'is-invalid' : '')
//-         )
//-           option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
//-           option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España

//-       .col-md-6
//-         label.form-label
//-           | Clasificación
//-           if erroresCampos && erroresCampos.id_clasificacion
//-             span.text-danger *
//-         select.form-select(
//-           name="id_clasificacion"
//-           required
//-           class=(erroresCampos && erroresCampos.id_clasificacion ? 'is-invalid' : '')
//-         )
//-           option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
//-           option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
//-           option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

//-     .text-end.mt-4
//-       button.btn.btn-success(type="submit") Guardar Cambios

//-   // ============================
//-   // JS DEFINITIVO – ESPECIALIDADES
//-   // ============================
//-   script.
//-     document.addEventListener('DOMContentLoaded', () => {
//-       const medicoSelect = document.getElementById('medicoSelect');
//-       const especialidadSelect = document.getElementById('especialidadSelect');

//-       medicoSelect.addEventListener('change', async () => {
//-         const idMedico = medicoSelect.value;

//-         especialidadSelect.innerHTML =
//-           '<option value="">Seleccione una especialidad</option>';

//-         if (!idMedico) return;

//-         const res = await fetch(`/medicos/${idMedico}/especialidades`);
//-         const especialidades = await res.json();

//-         if (!Array.isArray(especialidades) || especialidades.length === 0) {
//-           especialidadSelect.innerHTML +=
//-             '<option value="">Sin especialidades activas</option>';
//-           return;
//-         }

//-         especialidades.forEach(e => {
//-           especialidadSelect.innerHTML +=
//-             `<option value="${e.id}">
//-               ${e.nombre}
//-             </option>`;
//-         });
//-       });
//-     });





extends ../layout

block contenido
  a(href="/agendas" class="btn btn-outline-dark mb-3") ← Volver
  link(rel="stylesheet" href="/css/style.css")

  h1.text-center.mb-4 Editar Agenda

  // ============================
  // ALERTA GENERAL
  // ============================
  if error
    .alert.alert-danger.mt-3(role="alert") #{error}

  form(
    action=`/agendas/update/${agenda.id}`
    method="POST"
    id="editar-form"
    novalidate
  )

    input(type="hidden" name="id" value=agenda.id)

    // ============================
    // FECHAS
    // ============================
    .row.g-3.mb-3
      .col-md-6
        label.form-label
          | Fecha de Creación
          if erroresCampos && erroresCampos.fecha_creacion
            span.text-danger *
        input.form-control(
          type="date"
          name="fecha_creacion"
          required
          class=(erroresCampos && erroresCampos.fecha_creacion ? 'is-invalid' : '')
          value=agenda.fecha_creacion ? agenda.fecha_creacion.toISOString().split('T')[0] : ''
        )

      .col-md-6
        label.form-label
          | Fecha de Finalización
          if erroresCampos && erroresCampos.fecha_fin
            span.text-danger *
        input.form-control(
          type="date"
          name="fecha_fin"
          required
          class=(erroresCampos && erroresCampos.fecha_fin ? 'is-invalid' : '')
          value=agenda.fecha_fin ? agenda.fecha_fin.toISOString().split('T')[0] : ''
        )

    // ============================
    // HORARIOS
    // ============================
    .row.g-3.mb-3
      .col-md-6
        label.form-label
          | Hora Inicio
          if erroresCampos && erroresCampos.hora_inicio
            span.text-danger *
        input.form-control(
          type="time"
          name="hora_inicio"
          required
          class=(erroresCampos && erroresCampos.hora_inicio ? 'is-invalid' : '')
          value=agenda.hora_inicio
        )

      .col-md-6
        label.form-label
          | Hora Fin
          if erroresCampos && erroresCampos.hora_fin
            span.text-danger *
        input.form-control(
          type="time"
          name="hora_fin"
          required
          class=(erroresCampos && erroresCampos.hora_fin ? 'is-invalid' : '')
          value=agenda.hora_fin
        )

    // ============================
    // TURNOS
    // ============================
    .row.g-3.mb-3
      .col-md-6
        label.form-label
          | Duración del turno
          if erroresCampos && erroresCampos.duracion_turnos
            span.text-danger *
        select.form-select(
          name="duracion_turnos"
          required
          class=(erroresCampos && erroresCampos.duracion_turnos ? 'is-invalid' : '')
        )
          option(value="") Seleccione duración
          each d in [15,20,25,30,35,40,45,50,60]
            option(
              value=d
              selected=(String(d) === String(agenda.duracion_turnos))
            ) #{d} minutos

      .col-md-6
        label.form-label
          | Límite de Sobreturnos
          if erroresCampos && erroresCampos.limite_sobreturnos
            span.text-danger *
        input.form-control(
          type="number"
          min="0"
          name="limite_sobreturnos"
          required
          class=(erroresCampos && erroresCampos.limite_sobreturnos ? 'is-invalid' : '')
          value=agenda.limite_sobreturnos
        )

    // ============================
    // MÉDICO / ESPECIALIDAD
    // ============================
    .row.g-3.mb-3
      .col-md-6
        label.form-label
          | Médico
          if erroresCampos && erroresCampos.id_medico
            span.text-danger *
        select.form-select#medicoSelect(
          name="id_medico"
          required
          class=(erroresCampos && erroresCampos.id_medico ? 'is-invalid' : '')
        )
          option(value="") Seleccione médico
          each m in medicos
            option(
              value=m.id_medico
              selected=(String(m.id_medico) === String(agenda.id_medico))
            ) #{m.apellido} #{m.nombre}

      .col-md-6
        label.form-label
          | Especialidad
          if erroresCampos && erroresCampos.id_especialidad
            span.text-danger *
        select.form-select#especialidadSelect(
          name="id_especialidad"
          required
          class=(erroresCampos && erroresCampos.id_especialidad ? 'is-invalid' : '')
        )
          option(value="") Seleccione especialidad
          each e in especialidades
            option(
              value=e.id
              selected=(String(e.id) === String(agenda.id_especialidad))
            ) #{e.nombre}

    // ============================
    // SUCURSAL / CLASIFICACIÓN
    // ============================
    .row.g-3.mb-3
      .col-md-6
        label.form-label
          | Sucursal
          if erroresCampos && erroresCampos.id_sucursal
            span.text-danger *
        select.form-select(
          name="id_sucursal"
          required
          class=(erroresCampos && erroresCampos.id_sucursal ? 'is-invalid' : '')
        )
          option(value="1" selected=(agenda.id_sucursal == 1)) Clínica Argentina
          option(value="2" selected=(agenda.id_sucursal == 2)) Clínica España

      .col-md-6
        label.form-label
          | Clasificación
          if erroresCampos && erroresCampos.id_clasificacion
            span.text-danger *
        select.form-select(
          name="id_clasificacion"
          required
          class=(erroresCampos && erroresCampos.id_clasificacion ? 'is-invalid' : '')
        )
          option(value="1" selected=(agenda.id_clasificacion == 1)) Normal
          option(value="2" selected=(agenda.id_clasificacion == 2)) Especial
          option(value="3" selected=(agenda.id_clasificacion == 3)) VIP

    .text-end.mt-4
      button.btn.btn-success(type="submit") Guardar Cambios

  // ============================
  // JS: CAMBIO DINÁMICO DE ESPECIALIDADES
  // ============================
  script.
    document.addEventListener('DOMContentLoaded', () => {
      const medicoSelect = document.getElementById('medicoSelect');
      const especialidadSelect = document.getElementById('especialidadSelect');

      medicoSelect.addEventListener('change', async () => {
        const idMedico = medicoSelect.value;

        especialidadSelect.innerHTML =
          '<option value="">Seleccione una especialidad</option>';

        if (!idMedico) return;

        try {
          const res = await fetch(`/medicos/${idMedico}/especialidades`);
          const especialidades = await res.json();

          if (!Array.isArray(especialidades) || especialidades.length === 0) {
            especialidadSelect.innerHTML +=
              '<option value="">Sin especialidades activas</option>';
            return;
          }

          especialidades.forEach(e => {
            especialidadSelect.innerHTML +=
              `<option value="${e.id}">${e.nombre}</option>`;
          });
        } catch (err) {
          console.error('Error cargando especialidades', err);
        }
      });
    });

  script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
