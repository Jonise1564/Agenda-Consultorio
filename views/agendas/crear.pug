//- extends ../layout

//- block contenido
//-   style.
//-       .center-text {
//-         text-align: center;
//-       }
//-   .container.mt-5
//-     h2.center-text Crear Nueva Agenda
//-     form(action="/agendas" method="POST")
//-       h3 Fechas
//-       .mb-3  
//-         label(for="fecha_creacion" class="form-label") Comienza:
//-         input#fecha_creacion.form-control(type="date" name="fecha_creacion" required)
//-       .mb-3  
//-         label(for="fecha_fin" class="form-label") Finaliza:
//-         input#fecha_fin.form-control(type="date" name="fecha_fin" required)
//-       h3 Horas
//-       .mb-3
//-         label(for="hora_inicio" class="form-label") Inicio:
//-         input#hora_inicio.form-control(type="time" name="hora_inicio" required)
//-       .mb-3
//-         label(for="hora_fin" class="form-label") Final:
//-         input#hora_fin.form-control(type="time" name="hora_fin" required)
//-       br
//-       .mb-3
//-         label(for="duracion_turnos" class="form-label") Duración de Turnos (minutos):
//-         input#duracion_turnos.form-control(type="number" name="duracion_turnos" required)
//-       .mb-3
//-         label(for="limite_sobreturnos" class="form-label") Limite de Sobreturnos:
//-         input#limite_sobreturnos.form-control(type="number" name="limite_sobreturnos" required)

//-       h3 Médico y Especialidades
      
//-       div(class="mb-3")
//-         label(for="nromatricula" class="form-label") Eliga al Medico y la Especialidad:
//-         select(name="nromatricula" class="form-select" required)
//-           option(value="") Seleccione
//-           if matriculas
//-             each matricula in matriculas || []
//-               option(value=matricula.matricula)= `${matricula.nombreMat}, ${matricula.nombre} ${matricula.apellido}`
//-           else
//-             option(value="") No hay especialidades disponibles
//-       div(class="mb-3")
//-       label(for="id_sucursal" class="form-label") Sucursal:
//-       select(name="id_sucursal" class="form-select" required)
//-           option(value="") Asigne la Sucursal:
//-           option(value="1") Clinica Argentina, San Luis
//-           option(value="2") Clinica España, Juana Koslay

//-       div(class="mb-3")
//-       label(for="id_clasificacion" class="form-label") Clasificación: 
//-       select(name="id_clasificacion" class="form-select" required)
//-           option(value="") Eliga una Clasificación:
//-           option(value="1") Normal
//-           option(value="2") Especial
//-           option(value="3") VIP

//-       button(type="submit" class="btn btn-primary") Crear Agenda

//-     //- script(src="https://code.jquery.com/jquery-3.6.0.min.js")
//-     //- script.
//-     //-   $('#medicosSelect').on('change', function() {
//-     //-     const medicoId = $(this).val();
//-     //-     if (medicoId) {
//-     //-       $.ajax({
//-     //-         url: `/especialidades/${medicoId}`,
//-     //-         method: 'GET',
//-     //-         success: function(data) {
//-     //-           const especialidadesSelect = $('#especialidadesSelect');
//-     //-           especialidadesSelect.empty().append('<option value="">Selecciona una especialidad</option>');
//-     //-           data.forEach(especialidad => {
//-     //-             especialidadesSelect.append(`<option value="${especialidad.id}">${especialidad.nombre}</option>`);
//-     //-           });
//-     //-           especialidadesSelect.show();
//-     //-         },
//-     //-         error: function(error) {
//-     //-           console.error('Error:', error);
//-     //-         }
//-     //-       });
//-     //-     } else {
//-     //-       $('#especialidadesSelect').hide();
//-     //-     }
//-     //-   });

//-     script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
//-     integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous")
//-     //- script(src="/js/agendas.js")
extends ../layout

block contenido
  .container.mt-5
    h2.text-center.mb-4 Crear Nueva Agenda

    form(action="/agendas" method="POST" class="shadow p-4 rounded bg-light")

      // ===========================
      // FECHAS
      // ===========================
      h4.mb-3.text-primary Fechas de la Agenda

      .row
        .col-md-6.mb-3
          label.form-label(for="fecha_creacion") Desde:
          input#fecha_creacion.form-control(type="date" name="fecha_creacion" required)

        .col-md-6.mb-3
          label.form-label(for="fecha_fin") Hasta:
          input#fecha_fin.form-control(type="date" name="fecha_fin" required)

      // ===========================
      // HORARIOS
      // ===========================
      h4.mt-4.mb-3.text-primary Horarios

      .row
        .col-md-6.mb-3
          label.form-label(for="hora_inicio") Hora Inicio:
          input#hora_inicio.form-control(type="time" name="hora_inicio" required)

        .col-md-6.mb-3
          label.form-label(for="hora_fin") Hora Fin:
          input#hora_fin.form-control(type="time" name="hora_fin" required)

      .row
        .col-md-6.mb-3
          label.form-label(for="duracion_turnos") Duración del Turno (minutos):
          input#duracion_turnos.form-control(type="number" min="5" max="120" step="5" name="duracion_turnos" required)

        .col-md-6.mb-3
          label.form-label(for="limite_sobreturnos") Límite de Sobreturnos:
          input#limite_sobreturnos.form-control(type="number" min="0" name="limite_sobreturnos" required)

      // ===========================
      // MÉDICO Y ESPECIALIDAD
      // ===========================
      h4.mt-4.mb-3.text-primary Profesional

      .mb-4
        label.form-label(for="nromatricula") Médico + Especialidad:
        select.form-select(name="nromatricula" required)
          option(value="") Seleccione un profesional
          if matriculas
            each m in matriculas
              option(value=m.matricula)= `${m.nombreMat} - ${m.nombre} ${m.apellido}`
          else
            option(value="") No hay profesionales registrados

      // ===========================
      // SUCURSAL
      // ===========================
      .mb-3
        label.form-label(for="id_sucursal") Sucursal:
        select.form-select(name="id_sucursal" required)
          option(value="") Seleccione una sucursal
          option(value="1") Clínica Argentina – San Luis
          option(value="2") Clínica España – Juana Koslay

      // ===========================
      // CLASIFICACIÓN
      // ===========================
      .mb-4
        label.form-label(for="id_clasificacion") Clasificación:
        select.form-select(name="id_clasificacion" required)
          option(value="") Seleccione una clasificación
          option(value="1") Normal
          option(value="2") Especial
          option(value="3") VIP

      // BOTÓN
      .text-center.mt-4
        button.btn.btn-success.btn-lg(type="submit") Crear Agenda

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
  